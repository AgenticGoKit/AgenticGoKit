<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/AgenticGoKitDocs/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=AgenticGoKitDocs/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="description" content="Memory Optimization in AgenticGoKit Overview Memory optimization is crucial for building scalable, high-performance agent systems. This tutorial covers advanced techniques for optimizing memory systems in AgenticGoKit, including performance tuning, caching strategies, resource management, and scaling patterns.
Prerequisites Understanding of Vector Databases Familiarity with RAG Implementation Knowledge of Knowledge Bases Basic understanding of database performance tuning Performance Optimization Strategies 1. Vector Database Optimization // Optimized pgvector configuration func createOptimizedPgvectorMemory() (core.Memory, error) { config := core.AgentMemoryConfig{ Provider: &#34;pgvector&#34;, Connection: &#34;postgres://user:pass@localhost:5432/agentdb&#34;, EnableRAG: true, Dimensions: 1536, Embedding: core.EmbeddingConfig{ Provider: &#34;openai&#34;, Model: &#34;text-embedding-3-small&#34;, APIKey: os.Getenv(&#34;OPENAI_API_KEY&#34;), Dimensions: 1536, BatchSize: 100, }, Options: map[string]interface{}{ // Connection pool settings &#34;max_connections&#34;: 20, &#34;max_idle_connections&#34;: 5, &#34;connection_timeout&#34;: &#34;30s&#34;, // Index optimization &#34;index_type&#34;: &#34;hnsw&#34;, &#34;hnsw_m&#34;: 16, &#34;hnsw_ef_construction&#34;: 64, // Memory settings &#34;work_mem&#34;: &#34;256MB&#34;, &#34;effective_cache_size&#34;: &#34;4GB&#34;, }, } return core.NewMemory(config) }2. Caching Strategies type OptimizedMemoryCache struct { queryCache *LRUCache embeddingCache *LRUCache resultCache *LRUCache config CacheConfig } type CacheConfig struct { QueryCacheSize int EmbeddingCacheSize int ResultCacheSize int TTL time.Duration } func NewOptimizedMemoryCache(config CacheConfig) *OptimizedMemoryCache { return &amp;OptimizedMemoryCache{ queryCache: NewLRUCache(config.QueryCacheSize, config.TTL), embeddingCache: NewLRUCache(config.EmbeddingCacheSize, config.TTL), resultCache: NewLRUCache(config.ResultCacheSize, config.TTL), config: config, } } func (omc *OptimizedMemoryCache) GetCachedResults(query string) ([]core.MemoryResult, bool) { if results, found := omc.queryCache.Get(query); found { return results.([]core.MemoryResult), true } return nil, false } func (omc *OptimizedMemoryCache) CacheResults(query string, results []core.MemoryResult) { omc.queryCache.Set(query, results) } func (omc *OptimizedMemoryCache) GetCachedEmbedding(text string) ([]float32, bool) { if embedding, found := omc.embeddingCache.Get(text); found { return embedding.([]float32), true } return nil, false } func (omc *OptimizedMemoryCache) CacheEmbedding(text string, embedding []float32) { omc.embeddingCache.Set(text, embedding) }3. Batch Processing Optimization type BatchProcessor struct { memory core.Memory batchSize int timeout time.Duration semaphore chan struct{} } func NewBatchProcessor(memory core.Memory, batchSize int, concurrency int) *BatchProcessor { return &amp;BatchProcessor{ memory: memory, batchSize: batchSize, timeout: 30 * time.Second, semaphore: make(chan struct{}, concurrency), } } func (bp *BatchProcessor) ProcessBatch(ctx context.Context, items []string) error { // Process items in batches for i := 0; i &lt; len(items); i &#43;= bp.batchSize { end := i &#43; bp.batchSize if end &gt; len(items) { end = len(items) } batch := items[i:end] // Acquire semaphore for concurrency control select { case bp.semaphore &lt;- struct{}{}: go func(b []string) { defer func() { &lt;-bp.semaphore }() bp.processBatch(ctx, b) }(batch) case &lt;-ctx.Done(): return ctx.Err() } } return nil } func (bp *BatchProcessor) processBatch(ctx context.Context, batch []string) error { ctx, cancel := context.WithTimeout(ctx, bp.timeout) defer cancel() for _, item := range batch { err := bp.memory.Store(ctx, item, &#34;batch-item&#34;) if err != nil { log.Printf(&#34;Failed to store batch item: %v&#34;, err) } } return nil }Resource Management 1. Connection Pool Optimization type OptimizedConnectionManager struct { pool *sql.DB metrics *ConnectionMetrics config PoolConfig } type PoolConfig struct { MaxOpenConns int MaxIdleConns int ConnMaxLifetime time.Duration ConnMaxIdleTime time.Duration } func NewOptimizedConnectionManager(dsn string, config PoolConfig) (*OptimizedConnectionManager, error) { db, err := sql.Open(&#34;postgres&#34;, dsn) if err != nil { return nil, err } // Configure connection pool db.SetMaxOpenConns(config.MaxOpenConns) db.SetMaxIdleConns(config.MaxIdleConns) db.SetConnMaxLifetime(config.ConnMaxLifetime) db.SetConnMaxIdleTime(config.ConnMaxIdleTime) return &amp;OptimizedConnectionManager{ pool: db, metrics: NewConnectionMetrics(), config: config, }, nil } func (ocm *OptimizedConnectionManager) GetConnection(ctx context.Context) (*sql.Conn, error) { start := time.Now() conn, err := ocm.pool.Conn(ctx) if err != nil { ocm.metrics.RecordError() return nil, err } ocm.metrics.RecordAcquisition(time.Since(start)) return conn, nil }2. Memory Usage Monitoring type MemoryMonitor struct { thresholds MemoryThresholds alerts chan Alert interval time.Duration } type MemoryThresholds struct { WarningMB int64 CriticalMB int64 } type Alert struct { Level string Message string Time time.Time } func NewMemoryMonitor(thresholds MemoryThresholds) *MemoryMonitor { return &amp;MemoryMonitor{ thresholds: thresholds, alerts: make(chan Alert, 100), interval: 30 * time.Second, } } func (mm *MemoryMonitor) Start(ctx context.Context) { ticker := time.NewTicker(mm.interval) defer ticker.Stop() for { select { case &lt;-ctx.Done(): return case &lt;-ticker.C: mm.checkMemoryUsage() } } } func (mm *MemoryMonitor) checkMemoryUsage() { var m runtime.MemStats runtime.ReadMemStats(&amp;m) heapMB := int64(m.HeapAlloc / 1024 / 1024) if heapMB &gt; mm.thresholds.CriticalMB { mm.alerts &lt;- Alert{ Level: &#34;CRITICAL&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } runtime.GC() // Force garbage collection } else if heapMB &gt; mm.thresholds.WarningMB { mm.alerts &lt;- Alert{ Level: &#34;WARNING&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } } } func (mm *MemoryMonitor) GetAlerts() &lt;-chan Alert { return mm.alerts }Performance Monitoring 1. Metrics Collection type PerformanceMetrics struct { searchLatency []time.Duration cacheHitRate float64 throughput int64 errorCount int64 mu sync.RWMutex } func NewPerformanceMetrics() *PerformanceMetrics { return &amp;PerformanceMetrics{ searchLatency: make([]time.Duration, 0, 1000), } } func (pm *PerformanceMetrics) RecordSearch(duration time.Duration, cached bool) { pm.mu.Lock() defer pm.mu.Unlock() pm.searchLatency = append(pm.searchLatency, duration) pm.throughput&#43;&#43; // Keep only recent measurements if len(pm.searchLatency) &gt; 1000 { pm.searchLatency = pm.searchLatency[len(pm.searchLatency)-1000:] } // Update cache hit rate if cached { pm.cacheHitRate = (pm.cacheHitRate &#43; 1.0) / 2.0 } else { pm.cacheHitRate = pm.cacheHitRate / 2.0 } } func (pm *PerformanceMetrics) GetAverageLatency() time.Duration { pm.mu.RLock() defer pm.mu.RUnlock() if len(pm.searchLatency) == 0 { return 0 } var total time.Duration for _, latency := range pm.searchLatency { total &#43;= latency } return total / time.Duration(len(pm.searchLatency)) } func (pm *PerformanceMetrics) GetReport() map[string]interface{} { pm.mu.RLock() defer pm.mu.RUnlock() return map[string]interface{}{ &#34;avg_latency_ms&#34;: pm.GetAverageLatency().Milliseconds(), &#34;cache_hit_rate&#34;: pm.cacheHitRate, &#34;throughput&#34;: pm.throughput, &#34;error_count&#34;: pm.errorCount, } }Best Practices 1. Configuration Optimization Connection Pooling: Configure appropriate pool sizes based on workload Index Selection: Choose HNSW for better query performance, IVFFlat for faster indexing Memory Settings: Tune PostgreSQL memory settings for vector operations Batch Sizes: Optimize batch sizes for embedding API calls Cache Sizes: Size caches based on available memory and hit rate requirements 2. Performance Monitoring Latency Tracking: Monitor search and indexing latencies Resource Usage: Track memory, CPU, and disk usage Cache Performance: Monitor cache hit rates and effectiveness Error Rates: Track and alert on error rates Throughput: Monitor requests per second and concurrent users 3. Scaling Strategies Vertical Scaling: Increase memory and CPU for single-node performance Read Replicas: Use read replicas for read-heavy workloads Sharding: Distribute data across multiple nodes for large datasets Caching Layers: Implement multiple caching layers for frequently accessed data Load Balancing: Distribute requests across multiple instances Conclusion Memory optimization is essential for production-ready agent systems. Key takeaways:">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="memory-optimization :: AgenticGoKit Docs">
    <meta name="twitter:description" content="Memory Optimization in AgenticGoKit Overview Memory optimization is crucial for building scalable, high-performance agent systems. This tutorial covers advanced techniques for optimizing memory systems in AgenticGoKit, including performance tuning, caching strategies, resource management, and scaling patterns.
Prerequisites Understanding of Vector Databases Familiarity with RAG Implementation Knowledge of Knowledge Bases Basic understanding of database performance tuning Performance Optimization Strategies 1. Vector Database Optimization // Optimized pgvector configuration func createOptimizedPgvectorMemory() (core.Memory, error) { config := core.AgentMemoryConfig{ Provider: &#34;pgvector&#34;, Connection: &#34;postgres://user:pass@localhost:5432/agentdb&#34;, EnableRAG: true, Dimensions: 1536, Embedding: core.EmbeddingConfig{ Provider: &#34;openai&#34;, Model: &#34;text-embedding-3-small&#34;, APIKey: os.Getenv(&#34;OPENAI_API_KEY&#34;), Dimensions: 1536, BatchSize: 100, }, Options: map[string]interface{}{ // Connection pool settings &#34;max_connections&#34;: 20, &#34;max_idle_connections&#34;: 5, &#34;connection_timeout&#34;: &#34;30s&#34;, // Index optimization &#34;index_type&#34;: &#34;hnsw&#34;, &#34;hnsw_m&#34;: 16, &#34;hnsw_ef_construction&#34;: 64, // Memory settings &#34;work_mem&#34;: &#34;256MB&#34;, &#34;effective_cache_size&#34;: &#34;4GB&#34;, }, } return core.NewMemory(config) }2. Caching Strategies type OptimizedMemoryCache struct { queryCache *LRUCache embeddingCache *LRUCache resultCache *LRUCache config CacheConfig } type CacheConfig struct { QueryCacheSize int EmbeddingCacheSize int ResultCacheSize int TTL time.Duration } func NewOptimizedMemoryCache(config CacheConfig) *OptimizedMemoryCache { return &amp;OptimizedMemoryCache{ queryCache: NewLRUCache(config.QueryCacheSize, config.TTL), embeddingCache: NewLRUCache(config.EmbeddingCacheSize, config.TTL), resultCache: NewLRUCache(config.ResultCacheSize, config.TTL), config: config, } } func (omc *OptimizedMemoryCache) GetCachedResults(query string) ([]core.MemoryResult, bool) { if results, found := omc.queryCache.Get(query); found { return results.([]core.MemoryResult), true } return nil, false } func (omc *OptimizedMemoryCache) CacheResults(query string, results []core.MemoryResult) { omc.queryCache.Set(query, results) } func (omc *OptimizedMemoryCache) GetCachedEmbedding(text string) ([]float32, bool) { if embedding, found := omc.embeddingCache.Get(text); found { return embedding.([]float32), true } return nil, false } func (omc *OptimizedMemoryCache) CacheEmbedding(text string, embedding []float32) { omc.embeddingCache.Set(text, embedding) }3. Batch Processing Optimization type BatchProcessor struct { memory core.Memory batchSize int timeout time.Duration semaphore chan struct{} } func NewBatchProcessor(memory core.Memory, batchSize int, concurrency int) *BatchProcessor { return &amp;BatchProcessor{ memory: memory, batchSize: batchSize, timeout: 30 * time.Second, semaphore: make(chan struct{}, concurrency), } } func (bp *BatchProcessor) ProcessBatch(ctx context.Context, items []string) error { // Process items in batches for i := 0; i &lt; len(items); i &#43;= bp.batchSize { end := i &#43; bp.batchSize if end &gt; len(items) { end = len(items) } batch := items[i:end] // Acquire semaphore for concurrency control select { case bp.semaphore &lt;- struct{}{}: go func(b []string) { defer func() { &lt;-bp.semaphore }() bp.processBatch(ctx, b) }(batch) case &lt;-ctx.Done(): return ctx.Err() } } return nil } func (bp *BatchProcessor) processBatch(ctx context.Context, batch []string) error { ctx, cancel := context.WithTimeout(ctx, bp.timeout) defer cancel() for _, item := range batch { err := bp.memory.Store(ctx, item, &#34;batch-item&#34;) if err != nil { log.Printf(&#34;Failed to store batch item: %v&#34;, err) } } return nil }Resource Management 1. Connection Pool Optimization type OptimizedConnectionManager struct { pool *sql.DB metrics *ConnectionMetrics config PoolConfig } type PoolConfig struct { MaxOpenConns int MaxIdleConns int ConnMaxLifetime time.Duration ConnMaxIdleTime time.Duration } func NewOptimizedConnectionManager(dsn string, config PoolConfig) (*OptimizedConnectionManager, error) { db, err := sql.Open(&#34;postgres&#34;, dsn) if err != nil { return nil, err } // Configure connection pool db.SetMaxOpenConns(config.MaxOpenConns) db.SetMaxIdleConns(config.MaxIdleConns) db.SetConnMaxLifetime(config.ConnMaxLifetime) db.SetConnMaxIdleTime(config.ConnMaxIdleTime) return &amp;OptimizedConnectionManager{ pool: db, metrics: NewConnectionMetrics(), config: config, }, nil } func (ocm *OptimizedConnectionManager) GetConnection(ctx context.Context) (*sql.Conn, error) { start := time.Now() conn, err := ocm.pool.Conn(ctx) if err != nil { ocm.metrics.RecordError() return nil, err } ocm.metrics.RecordAcquisition(time.Since(start)) return conn, nil }2. Memory Usage Monitoring type MemoryMonitor struct { thresholds MemoryThresholds alerts chan Alert interval time.Duration } type MemoryThresholds struct { WarningMB int64 CriticalMB int64 } type Alert struct { Level string Message string Time time.Time } func NewMemoryMonitor(thresholds MemoryThresholds) *MemoryMonitor { return &amp;MemoryMonitor{ thresholds: thresholds, alerts: make(chan Alert, 100), interval: 30 * time.Second, } } func (mm *MemoryMonitor) Start(ctx context.Context) { ticker := time.NewTicker(mm.interval) defer ticker.Stop() for { select { case &lt;-ctx.Done(): return case &lt;-ticker.C: mm.checkMemoryUsage() } } } func (mm *MemoryMonitor) checkMemoryUsage() { var m runtime.MemStats runtime.ReadMemStats(&amp;m) heapMB := int64(m.HeapAlloc / 1024 / 1024) if heapMB &gt; mm.thresholds.CriticalMB { mm.alerts &lt;- Alert{ Level: &#34;CRITICAL&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } runtime.GC() // Force garbage collection } else if heapMB &gt; mm.thresholds.WarningMB { mm.alerts &lt;- Alert{ Level: &#34;WARNING&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } } } func (mm *MemoryMonitor) GetAlerts() &lt;-chan Alert { return mm.alerts }Performance Monitoring 1. Metrics Collection type PerformanceMetrics struct { searchLatency []time.Duration cacheHitRate float64 throughput int64 errorCount int64 mu sync.RWMutex } func NewPerformanceMetrics() *PerformanceMetrics { return &amp;PerformanceMetrics{ searchLatency: make([]time.Duration, 0, 1000), } } func (pm *PerformanceMetrics) RecordSearch(duration time.Duration, cached bool) { pm.mu.Lock() defer pm.mu.Unlock() pm.searchLatency = append(pm.searchLatency, duration) pm.throughput&#43;&#43; // Keep only recent measurements if len(pm.searchLatency) &gt; 1000 { pm.searchLatency = pm.searchLatency[len(pm.searchLatency)-1000:] } // Update cache hit rate if cached { pm.cacheHitRate = (pm.cacheHitRate &#43; 1.0) / 2.0 } else { pm.cacheHitRate = pm.cacheHitRate / 2.0 } } func (pm *PerformanceMetrics) GetAverageLatency() time.Duration { pm.mu.RLock() defer pm.mu.RUnlock() if len(pm.searchLatency) == 0 { return 0 } var total time.Duration for _, latency := range pm.searchLatency { total &#43;= latency } return total / time.Duration(len(pm.searchLatency)) } func (pm *PerformanceMetrics) GetReport() map[string]interface{} { pm.mu.RLock() defer pm.mu.RUnlock() return map[string]interface{}{ &#34;avg_latency_ms&#34;: pm.GetAverageLatency().Milliseconds(), &#34;cache_hit_rate&#34;: pm.cacheHitRate, &#34;throughput&#34;: pm.throughput, &#34;error_count&#34;: pm.errorCount, } }Best Practices 1. Configuration Optimization Connection Pooling: Configure appropriate pool sizes based on workload Index Selection: Choose HNSW for better query performance, IVFFlat for faster indexing Memory Settings: Tune PostgreSQL memory settings for vector operations Batch Sizes: Optimize batch sizes for embedding API calls Cache Sizes: Size caches based on available memory and hit rate requirements 2. Performance Monitoring Latency Tracking: Monitor search and indexing latencies Resource Usage: Track memory, CPU, and disk usage Cache Performance: Monitor cache hit rates and effectiveness Error Rates: Track and alert on error rates Throughput: Monitor requests per second and concurrent users 3. Scaling Strategies Vertical Scaling: Increase memory and CPU for single-node performance Read Replicas: Use read replicas for read-heavy workloads Sharding: Distribute data across multiple nodes for large datasets Caching Layers: Implement multiple caching layers for frequently accessed data Load Balancing: Distribute requests across multiple instances Conclusion Memory optimization is essential for production-ready agent systems. Key takeaways:">
    <meta property="og:url" content="http://localhost:1313/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html">
    <meta property="og:site_name" content="AgenticGoKit Docs">
    <meta property="og:title" content="memory-optimization :: AgenticGoKit Docs">
    <meta property="og:description" content="Memory Optimization in AgenticGoKit Overview Memory optimization is crucial for building scalable, high-performance agent systems. This tutorial covers advanced techniques for optimizing memory systems in AgenticGoKit, including performance tuning, caching strategies, resource management, and scaling patterns.
Prerequisites Understanding of Vector Databases Familiarity with RAG Implementation Knowledge of Knowledge Bases Basic understanding of database performance tuning Performance Optimization Strategies 1. Vector Database Optimization // Optimized pgvector configuration func createOptimizedPgvectorMemory() (core.Memory, error) { config := core.AgentMemoryConfig{ Provider: &#34;pgvector&#34;, Connection: &#34;postgres://user:pass@localhost:5432/agentdb&#34;, EnableRAG: true, Dimensions: 1536, Embedding: core.EmbeddingConfig{ Provider: &#34;openai&#34;, Model: &#34;text-embedding-3-small&#34;, APIKey: os.Getenv(&#34;OPENAI_API_KEY&#34;), Dimensions: 1536, BatchSize: 100, }, Options: map[string]interface{}{ // Connection pool settings &#34;max_connections&#34;: 20, &#34;max_idle_connections&#34;: 5, &#34;connection_timeout&#34;: &#34;30s&#34;, // Index optimization &#34;index_type&#34;: &#34;hnsw&#34;, &#34;hnsw_m&#34;: 16, &#34;hnsw_ef_construction&#34;: 64, // Memory settings &#34;work_mem&#34;: &#34;256MB&#34;, &#34;effective_cache_size&#34;: &#34;4GB&#34;, }, } return core.NewMemory(config) }2. Caching Strategies type OptimizedMemoryCache struct { queryCache *LRUCache embeddingCache *LRUCache resultCache *LRUCache config CacheConfig } type CacheConfig struct { QueryCacheSize int EmbeddingCacheSize int ResultCacheSize int TTL time.Duration } func NewOptimizedMemoryCache(config CacheConfig) *OptimizedMemoryCache { return &amp;OptimizedMemoryCache{ queryCache: NewLRUCache(config.QueryCacheSize, config.TTL), embeddingCache: NewLRUCache(config.EmbeddingCacheSize, config.TTL), resultCache: NewLRUCache(config.ResultCacheSize, config.TTL), config: config, } } func (omc *OptimizedMemoryCache) GetCachedResults(query string) ([]core.MemoryResult, bool) { if results, found := omc.queryCache.Get(query); found { return results.([]core.MemoryResult), true } return nil, false } func (omc *OptimizedMemoryCache) CacheResults(query string, results []core.MemoryResult) { omc.queryCache.Set(query, results) } func (omc *OptimizedMemoryCache) GetCachedEmbedding(text string) ([]float32, bool) { if embedding, found := omc.embeddingCache.Get(text); found { return embedding.([]float32), true } return nil, false } func (omc *OptimizedMemoryCache) CacheEmbedding(text string, embedding []float32) { omc.embeddingCache.Set(text, embedding) }3. Batch Processing Optimization type BatchProcessor struct { memory core.Memory batchSize int timeout time.Duration semaphore chan struct{} } func NewBatchProcessor(memory core.Memory, batchSize int, concurrency int) *BatchProcessor { return &amp;BatchProcessor{ memory: memory, batchSize: batchSize, timeout: 30 * time.Second, semaphore: make(chan struct{}, concurrency), } } func (bp *BatchProcessor) ProcessBatch(ctx context.Context, items []string) error { // Process items in batches for i := 0; i &lt; len(items); i &#43;= bp.batchSize { end := i &#43; bp.batchSize if end &gt; len(items) { end = len(items) } batch := items[i:end] // Acquire semaphore for concurrency control select { case bp.semaphore &lt;- struct{}{}: go func(b []string) { defer func() { &lt;-bp.semaphore }() bp.processBatch(ctx, b) }(batch) case &lt;-ctx.Done(): return ctx.Err() } } return nil } func (bp *BatchProcessor) processBatch(ctx context.Context, batch []string) error { ctx, cancel := context.WithTimeout(ctx, bp.timeout) defer cancel() for _, item := range batch { err := bp.memory.Store(ctx, item, &#34;batch-item&#34;) if err != nil { log.Printf(&#34;Failed to store batch item: %v&#34;, err) } } return nil }Resource Management 1. Connection Pool Optimization type OptimizedConnectionManager struct { pool *sql.DB metrics *ConnectionMetrics config PoolConfig } type PoolConfig struct { MaxOpenConns int MaxIdleConns int ConnMaxLifetime time.Duration ConnMaxIdleTime time.Duration } func NewOptimizedConnectionManager(dsn string, config PoolConfig) (*OptimizedConnectionManager, error) { db, err := sql.Open(&#34;postgres&#34;, dsn) if err != nil { return nil, err } // Configure connection pool db.SetMaxOpenConns(config.MaxOpenConns) db.SetMaxIdleConns(config.MaxIdleConns) db.SetConnMaxLifetime(config.ConnMaxLifetime) db.SetConnMaxIdleTime(config.ConnMaxIdleTime) return &amp;OptimizedConnectionManager{ pool: db, metrics: NewConnectionMetrics(), config: config, }, nil } func (ocm *OptimizedConnectionManager) GetConnection(ctx context.Context) (*sql.Conn, error) { start := time.Now() conn, err := ocm.pool.Conn(ctx) if err != nil { ocm.metrics.RecordError() return nil, err } ocm.metrics.RecordAcquisition(time.Since(start)) return conn, nil }2. Memory Usage Monitoring type MemoryMonitor struct { thresholds MemoryThresholds alerts chan Alert interval time.Duration } type MemoryThresholds struct { WarningMB int64 CriticalMB int64 } type Alert struct { Level string Message string Time time.Time } func NewMemoryMonitor(thresholds MemoryThresholds) *MemoryMonitor { return &amp;MemoryMonitor{ thresholds: thresholds, alerts: make(chan Alert, 100), interval: 30 * time.Second, } } func (mm *MemoryMonitor) Start(ctx context.Context) { ticker := time.NewTicker(mm.interval) defer ticker.Stop() for { select { case &lt;-ctx.Done(): return case &lt;-ticker.C: mm.checkMemoryUsage() } } } func (mm *MemoryMonitor) checkMemoryUsage() { var m runtime.MemStats runtime.ReadMemStats(&amp;m) heapMB := int64(m.HeapAlloc / 1024 / 1024) if heapMB &gt; mm.thresholds.CriticalMB { mm.alerts &lt;- Alert{ Level: &#34;CRITICAL&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } runtime.GC() // Force garbage collection } else if heapMB &gt; mm.thresholds.WarningMB { mm.alerts &lt;- Alert{ Level: &#34;WARNING&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } } } func (mm *MemoryMonitor) GetAlerts() &lt;-chan Alert { return mm.alerts }Performance Monitoring 1. Metrics Collection type PerformanceMetrics struct { searchLatency []time.Duration cacheHitRate float64 throughput int64 errorCount int64 mu sync.RWMutex } func NewPerformanceMetrics() *PerformanceMetrics { return &amp;PerformanceMetrics{ searchLatency: make([]time.Duration, 0, 1000), } } func (pm *PerformanceMetrics) RecordSearch(duration time.Duration, cached bool) { pm.mu.Lock() defer pm.mu.Unlock() pm.searchLatency = append(pm.searchLatency, duration) pm.throughput&#43;&#43; // Keep only recent measurements if len(pm.searchLatency) &gt; 1000 { pm.searchLatency = pm.searchLatency[len(pm.searchLatency)-1000:] } // Update cache hit rate if cached { pm.cacheHitRate = (pm.cacheHitRate &#43; 1.0) / 2.0 } else { pm.cacheHitRate = pm.cacheHitRate / 2.0 } } func (pm *PerformanceMetrics) GetAverageLatency() time.Duration { pm.mu.RLock() defer pm.mu.RUnlock() if len(pm.searchLatency) == 0 { return 0 } var total time.Duration for _, latency := range pm.searchLatency { total &#43;= latency } return total / time.Duration(len(pm.searchLatency)) } func (pm *PerformanceMetrics) GetReport() map[string]interface{} { pm.mu.RLock() defer pm.mu.RUnlock() return map[string]interface{}{ &#34;avg_latency_ms&#34;: pm.GetAverageLatency().Milliseconds(), &#34;cache_hit_rate&#34;: pm.cacheHitRate, &#34;throughput&#34;: pm.throughput, &#34;error_count&#34;: pm.errorCount, } }Best Practices 1. Configuration Optimization Connection Pooling: Configure appropriate pool sizes based on workload Index Selection: Choose HNSW for better query performance, IVFFlat for faster indexing Memory Settings: Tune PostgreSQL memory settings for vector operations Batch Sizes: Optimize batch sizes for embedding API calls Cache Sizes: Size caches based on available memory and hit rate requirements 2. Performance Monitoring Latency Tracking: Monitor search and indexing latencies Resource Usage: Track memory, CPU, and disk usage Cache Performance: Monitor cache hit rates and effectiveness Error Rates: Track and alert on error rates Throughput: Monitor requests per second and concurrent users 3. Scaling Strategies Vertical Scaling: Increase memory and CPU for single-node performance Read Replicas: Use read replicas for read-heavy workloads Sharding: Distribute data across multiple nodes for large datasets Caching Layers: Implement multiple caching layers for frequently accessed data Load Balancing: Distribute requests across multiple instances Conclusion Memory optimization is essential for production-ready agent systems. Key takeaways:">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="tutorials">
    <meta property="article:published_time" content="2025-07-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="name" content="memory-optimization :: AgenticGoKit Docs">
    <meta itemprop="description" content="Memory Optimization in AgenticGoKit Overview Memory optimization is crucial for building scalable, high-performance agent systems. This tutorial covers advanced techniques for optimizing memory systems in AgenticGoKit, including performance tuning, caching strategies, resource management, and scaling patterns.
Prerequisites Understanding of Vector Databases Familiarity with RAG Implementation Knowledge of Knowledge Bases Basic understanding of database performance tuning Performance Optimization Strategies 1. Vector Database Optimization // Optimized pgvector configuration func createOptimizedPgvectorMemory() (core.Memory, error) { config := core.AgentMemoryConfig{ Provider: &#34;pgvector&#34;, Connection: &#34;postgres://user:pass@localhost:5432/agentdb&#34;, EnableRAG: true, Dimensions: 1536, Embedding: core.EmbeddingConfig{ Provider: &#34;openai&#34;, Model: &#34;text-embedding-3-small&#34;, APIKey: os.Getenv(&#34;OPENAI_API_KEY&#34;), Dimensions: 1536, BatchSize: 100, }, Options: map[string]interface{}{ // Connection pool settings &#34;max_connections&#34;: 20, &#34;max_idle_connections&#34;: 5, &#34;connection_timeout&#34;: &#34;30s&#34;, // Index optimization &#34;index_type&#34;: &#34;hnsw&#34;, &#34;hnsw_m&#34;: 16, &#34;hnsw_ef_construction&#34;: 64, // Memory settings &#34;work_mem&#34;: &#34;256MB&#34;, &#34;effective_cache_size&#34;: &#34;4GB&#34;, }, } return core.NewMemory(config) }2. Caching Strategies type OptimizedMemoryCache struct { queryCache *LRUCache embeddingCache *LRUCache resultCache *LRUCache config CacheConfig } type CacheConfig struct { QueryCacheSize int EmbeddingCacheSize int ResultCacheSize int TTL time.Duration } func NewOptimizedMemoryCache(config CacheConfig) *OptimizedMemoryCache { return &amp;OptimizedMemoryCache{ queryCache: NewLRUCache(config.QueryCacheSize, config.TTL), embeddingCache: NewLRUCache(config.EmbeddingCacheSize, config.TTL), resultCache: NewLRUCache(config.ResultCacheSize, config.TTL), config: config, } } func (omc *OptimizedMemoryCache) GetCachedResults(query string) ([]core.MemoryResult, bool) { if results, found := omc.queryCache.Get(query); found { return results.([]core.MemoryResult), true } return nil, false } func (omc *OptimizedMemoryCache) CacheResults(query string, results []core.MemoryResult) { omc.queryCache.Set(query, results) } func (omc *OptimizedMemoryCache) GetCachedEmbedding(text string) ([]float32, bool) { if embedding, found := omc.embeddingCache.Get(text); found { return embedding.([]float32), true } return nil, false } func (omc *OptimizedMemoryCache) CacheEmbedding(text string, embedding []float32) { omc.embeddingCache.Set(text, embedding) }3. Batch Processing Optimization type BatchProcessor struct { memory core.Memory batchSize int timeout time.Duration semaphore chan struct{} } func NewBatchProcessor(memory core.Memory, batchSize int, concurrency int) *BatchProcessor { return &amp;BatchProcessor{ memory: memory, batchSize: batchSize, timeout: 30 * time.Second, semaphore: make(chan struct{}, concurrency), } } func (bp *BatchProcessor) ProcessBatch(ctx context.Context, items []string) error { // Process items in batches for i := 0; i &lt; len(items); i &#43;= bp.batchSize { end := i &#43; bp.batchSize if end &gt; len(items) { end = len(items) } batch := items[i:end] // Acquire semaphore for concurrency control select { case bp.semaphore &lt;- struct{}{}: go func(b []string) { defer func() { &lt;-bp.semaphore }() bp.processBatch(ctx, b) }(batch) case &lt;-ctx.Done(): return ctx.Err() } } return nil } func (bp *BatchProcessor) processBatch(ctx context.Context, batch []string) error { ctx, cancel := context.WithTimeout(ctx, bp.timeout) defer cancel() for _, item := range batch { err := bp.memory.Store(ctx, item, &#34;batch-item&#34;) if err != nil { log.Printf(&#34;Failed to store batch item: %v&#34;, err) } } return nil }Resource Management 1. Connection Pool Optimization type OptimizedConnectionManager struct { pool *sql.DB metrics *ConnectionMetrics config PoolConfig } type PoolConfig struct { MaxOpenConns int MaxIdleConns int ConnMaxLifetime time.Duration ConnMaxIdleTime time.Duration } func NewOptimizedConnectionManager(dsn string, config PoolConfig) (*OptimizedConnectionManager, error) { db, err := sql.Open(&#34;postgres&#34;, dsn) if err != nil { return nil, err } // Configure connection pool db.SetMaxOpenConns(config.MaxOpenConns) db.SetMaxIdleConns(config.MaxIdleConns) db.SetConnMaxLifetime(config.ConnMaxLifetime) db.SetConnMaxIdleTime(config.ConnMaxIdleTime) return &amp;OptimizedConnectionManager{ pool: db, metrics: NewConnectionMetrics(), config: config, }, nil } func (ocm *OptimizedConnectionManager) GetConnection(ctx context.Context) (*sql.Conn, error) { start := time.Now() conn, err := ocm.pool.Conn(ctx) if err != nil { ocm.metrics.RecordError() return nil, err } ocm.metrics.RecordAcquisition(time.Since(start)) return conn, nil }2. Memory Usage Monitoring type MemoryMonitor struct { thresholds MemoryThresholds alerts chan Alert interval time.Duration } type MemoryThresholds struct { WarningMB int64 CriticalMB int64 } type Alert struct { Level string Message string Time time.Time } func NewMemoryMonitor(thresholds MemoryThresholds) *MemoryMonitor { return &amp;MemoryMonitor{ thresholds: thresholds, alerts: make(chan Alert, 100), interval: 30 * time.Second, } } func (mm *MemoryMonitor) Start(ctx context.Context) { ticker := time.NewTicker(mm.interval) defer ticker.Stop() for { select { case &lt;-ctx.Done(): return case &lt;-ticker.C: mm.checkMemoryUsage() } } } func (mm *MemoryMonitor) checkMemoryUsage() { var m runtime.MemStats runtime.ReadMemStats(&amp;m) heapMB := int64(m.HeapAlloc / 1024 / 1024) if heapMB &gt; mm.thresholds.CriticalMB { mm.alerts &lt;- Alert{ Level: &#34;CRITICAL&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } runtime.GC() // Force garbage collection } else if heapMB &gt; mm.thresholds.WarningMB { mm.alerts &lt;- Alert{ Level: &#34;WARNING&#34;, Message: fmt.Sprintf(&#34;Memory usage: %d MB&#34;, heapMB), Time: time.Now(), } } } func (mm *MemoryMonitor) GetAlerts() &lt;-chan Alert { return mm.alerts }Performance Monitoring 1. Metrics Collection type PerformanceMetrics struct { searchLatency []time.Duration cacheHitRate float64 throughput int64 errorCount int64 mu sync.RWMutex } func NewPerformanceMetrics() *PerformanceMetrics { return &amp;PerformanceMetrics{ searchLatency: make([]time.Duration, 0, 1000), } } func (pm *PerformanceMetrics) RecordSearch(duration time.Duration, cached bool) { pm.mu.Lock() defer pm.mu.Unlock() pm.searchLatency = append(pm.searchLatency, duration) pm.throughput&#43;&#43; // Keep only recent measurements if len(pm.searchLatency) &gt; 1000 { pm.searchLatency = pm.searchLatency[len(pm.searchLatency)-1000:] } // Update cache hit rate if cached { pm.cacheHitRate = (pm.cacheHitRate &#43; 1.0) / 2.0 } else { pm.cacheHitRate = pm.cacheHitRate / 2.0 } } func (pm *PerformanceMetrics) GetAverageLatency() time.Duration { pm.mu.RLock() defer pm.mu.RUnlock() if len(pm.searchLatency) == 0 { return 0 } var total time.Duration for _, latency := range pm.searchLatency { total &#43;= latency } return total / time.Duration(len(pm.searchLatency)) } func (pm *PerformanceMetrics) GetReport() map[string]interface{} { pm.mu.RLock() defer pm.mu.RUnlock() return map[string]interface{}{ &#34;avg_latency_ms&#34;: pm.GetAverageLatency().Milliseconds(), &#34;cache_hit_rate&#34;: pm.cacheHitRate, &#34;throughput&#34;: pm.throughput, &#34;error_count&#34;: pm.errorCount, } }Best Practices 1. Configuration Optimization Connection Pooling: Configure appropriate pool sizes based on workload Index Selection: Choose HNSW for better query performance, IVFFlat for faster indexing Memory Settings: Tune PostgreSQL memory settings for vector operations Batch Sizes: Optimize batch sizes for embedding API calls Cache Sizes: Size caches based on available memory and hit rate requirements 2. Performance Monitoring Latency Tracking: Monitor search and indexing latencies Resource Usage: Track memory, CPU, and disk usage Cache Performance: Monitor cache hit rates and effectiveness Error Rates: Track and alert on error rates Throughput: Monitor requests per second and concurrent users 3. Scaling Strategies Vertical Scaling: Increase memory and CPU for single-node performance Read Replicas: Use read replicas for read-heavy workloads Sharding: Distribute data across multiple nodes for large datasets Caching Layers: Implement multiple caching layers for frequently accessed data Load Balancing: Distribute requests across multiple instances Conclusion Memory optimization is essential for production-ready agent systems. Key takeaways:">
    <meta itemprop="datePublished" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="dateModified" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="wordCount" content="1040">
    <title>memory-optimization :: AgenticGoKit Docs</title>
    <link href="/AgenticGoKitDocs/css/auto-complete/auto-complete.min.css?1753430931" rel="stylesheet">
    <script src="/AgenticGoKitDocs/js/auto-complete/auto-complete.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/search-lunr.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/search.js?1753430931" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/AgenticGoKitDocs/searchindex.en.js?1753430931";
    </script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.stemmer.support.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.multi.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.en.min.js?1753430931" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/AgenticGoKitDocs/fonts/fontawesome/css/fontawesome-all.min.css?1753430931" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/AgenticGoKitDocs/fonts/fontawesome/css/fontawesome-all.min.css?1753430931" rel="stylesheet"></noscript>
    <link href="/AgenticGoKitDocs/css/perfect-scrollbar/perfect-scrollbar.min.css?1753430931" rel="stylesheet">
    <link href="/AgenticGoKitDocs/css/theme.css?1753430931" rel="stylesheet">
    <link href="/AgenticGoKitDocs/css/format-html.css?1753430931" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/tutorials\/memory-systems\/memory-optimization\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313\/AgenticGoKitDocs';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'blue' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#performance-optimization-strategies">Performance Optimization Strategies</a>
      <ul>
        <li><a href="#1-vector-database-optimization">1. Vector Database Optimization</a></li>
        <li><a href="#2-caching-strategies">2. Caching Strategies</a></li>
        <li><a href="#3-batch-processing-optimization">3. Batch Processing Optimization</a></li>
      </ul>
    </li>
    <li><a href="#resource-management">Resource Management</a>
      <ul>
        <li><a href="#1-connection-pool-optimization">1. Connection Pool Optimization</a></li>
        <li><a href="#2-memory-usage-monitoring">2. Memory Usage Monitoring</a></li>
      </ul>
    </li>
    <li><a href="#performance-monitoring">Performance Monitoring</a>
      <ul>
        <li><a href="#1-metrics-collection">1. Metrics Collection</a></li>
      </ul>
    </li>
    <li><a href="#best-practices">Best Practices</a>
      <ul>
        <li><a href="#1-configuration-optimization">1. Configuration Optimization</a></li>
        <li><a href="#2-performance-monitoring">2. Performance Monitoring</a></li>
        <li><a href="#3-scaling-strategies">3. Scaling Strategies</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
    <li><a href="#next-steps">Next Steps</a></li>
    <li><a href="#further-reading">Further Reading</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/index.html"><span itemprop="name">content</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/tutorials/index.html"><span itemprop="name">tutorials</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/tutorials/memory-systems/index.html"><span itemprop="name">memory-systems</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">memory-optimization</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html" title="knowledge-bases (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html" title="rag-implementation (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable tutorials" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="memory-optimization">memory-optimization</h1>

<h1 id="memory-optimization-in-agenticgokit">Memory Optimization in AgenticGoKit</h1>
<h2 id="overview">Overview</h2>
<p>Memory optimization is crucial for building scalable, high-performance agent systems. This tutorial covers advanced techniques for optimizing memory systems in AgenticGoKit, including performance tuning, caching strategies, resource management, and scaling patterns.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Understanding of <a href="/AgenticGoKitDocs/tutorials/memory-systems/vector-databases/index.html">Vector Databases</a></li>
<li>Familiarity with <a href="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html">RAG Implementation</a></li>
<li>Knowledge of <a href="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html">Knowledge Bases</a></li>
<li>Basic understanding of database performance tuning</li>
</ul>
<h2 id="performance-optimization-strategies">Performance Optimization Strategies</h2>
<h3 id="1-vector-database-optimization">1. Vector Database Optimization</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Optimized pgvector configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">createOptimizedPgvectorMemory</span>() (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Memory</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">config</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentMemoryConfig</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Provider</span>:   <span style="color:#e6db74">&#34;pgvector&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Connection</span>: <span style="color:#e6db74">&#34;postgres://user:pass@localhost:5432/agentdb&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">EnableRAG</span>:  <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Dimensions</span>: <span style="color:#ae81ff">1536</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Embedding</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">EmbeddingConfig</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Provider</span>:   <span style="color:#e6db74">&#34;openai&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Model</span>:      <span style="color:#e6db74">&#34;text-embedding-3-small&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">APIKey</span>:     <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Getenv</span>(<span style="color:#e6db74">&#34;OPENAI_API_KEY&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Dimensions</span>: <span style="color:#ae81ff">1536</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">BatchSize</span>:  <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Options</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Connection pool settings</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;max_connections&#34;</span>:     <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;max_idle_connections&#34;</span>: <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;connection_timeout&#34;</span>:  <span style="color:#e6db74">&#34;30s&#34;</span>,
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Index optimization</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;index_type&#34;</span>:      <span style="color:#e6db74">&#34;hnsw&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;hnsw_m&#34;</span>:         <span style="color:#ae81ff">16</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;hnsw_ef_construction&#34;</span>: <span style="color:#ae81ff">64</span>,
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Memory settings</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;work_mem&#34;</span>:        <span style="color:#e6db74">&#34;256MB&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;effective_cache_size&#34;</span>: <span style="color:#e6db74">&#34;4GB&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewMemory</span>(<span style="color:#a6e22e">config</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="2-caching-strategies">2. Caching Strategies</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">OptimizedMemoryCache</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryCache</span>    <span style="color:#f92672">*</span><span style="color:#a6e22e">LRUCache</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">embeddingCache</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">LRUCache</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">resultCache</span>   <span style="color:#f92672">*</span><span style="color:#a6e22e">LRUCache</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">config</span>        <span style="color:#a6e22e">CacheConfig</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">CacheConfig</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">QueryCacheSize</span>     <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">EmbeddingCacheSize</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ResultCacheSize</span>    <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">TTL</span>               <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewOptimizedMemoryCache</span>(<span style="color:#a6e22e">config</span> <span style="color:#a6e22e">CacheConfig</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedMemoryCache</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">OptimizedMemoryCache</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">queryCache</span>:    <span style="color:#a6e22e">NewLRUCache</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">QueryCacheSize</span>, <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">TTL</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">embeddingCache</span>: <span style="color:#a6e22e">NewLRUCache</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">EmbeddingCacheSize</span>, <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">TTL</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">resultCache</span>:   <span style="color:#a6e22e">NewLRUCache</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">ResultCacheSize</span>, <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">TTL</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">config</span>:        <span style="color:#a6e22e">config</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">omc</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedMemoryCache</span>) <span style="color:#a6e22e">GetCachedResults</span>(<span style="color:#a6e22e">query</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">MemoryResult</span>, <span style="color:#66d9ef">bool</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">found</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">omc</span>.<span style="color:#a6e22e">queryCache</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">query</span>); <span style="color:#a6e22e">found</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">results</span>.([]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">MemoryResult</span>), <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">omc</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedMemoryCache</span>) <span style="color:#a6e22e">CacheResults</span>(<span style="color:#a6e22e">query</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">results</span> []<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">MemoryResult</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">omc</span>.<span style="color:#a6e22e">queryCache</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">query</span>, <span style="color:#a6e22e">results</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">omc</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedMemoryCache</span>) <span style="color:#a6e22e">GetCachedEmbedding</span>(<span style="color:#a6e22e">text</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">float32</span>, <span style="color:#66d9ef">bool</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">embedding</span>, <span style="color:#a6e22e">found</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">omc</span>.<span style="color:#a6e22e">embeddingCache</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">text</span>); <span style="color:#a6e22e">found</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">embedding</span>.([]<span style="color:#66d9ef">float32</span>), <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">omc</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedMemoryCache</span>) <span style="color:#a6e22e">CacheEmbedding</span>(<span style="color:#a6e22e">text</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">embedding</span> []<span style="color:#66d9ef">float32</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">omc</span>.<span style="color:#a6e22e">embeddingCache</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">text</span>, <span style="color:#a6e22e">embedding</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="3-batch-processing-optimization">3. Batch Processing Optimization</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">BatchProcessor</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memory</span>     <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Memory</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">batchSize</span>  <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">timeout</span>    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">semaphore</span>  <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">struct</span>{}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewBatchProcessor</span>(<span style="color:#a6e22e">memory</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Memory</span>, <span style="color:#a6e22e">batchSize</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">concurrency</span> <span style="color:#66d9ef">int</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">BatchProcessor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">BatchProcessor</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">memory</span>:    <span style="color:#a6e22e">memory</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">batchSize</span>: <span style="color:#a6e22e">batchSize</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">timeout</span>:   <span style="color:#ae81ff">30</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">semaphore</span>: make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">struct</span>{}, <span style="color:#a6e22e">concurrency</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">bp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">BatchProcessor</span>) <span style="color:#a6e22e">ProcessBatch</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">items</span> []<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Process items in batches</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">items</span>); <span style="color:#a6e22e">i</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">batchSize</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">end</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">batchSize</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">end</span> &gt; len(<span style="color:#a6e22e">items</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">end</span> = len(<span style="color:#a6e22e">items</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">batch</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">i</span>:<span style="color:#a6e22e">end</span>]
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Acquire semaphore for concurrency control</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">select</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">semaphore</span> <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">struct</span>{}{}:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">b</span> []<span style="color:#66d9ef">string</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">defer</span> <span style="color:#66d9ef">func</span>() { <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">semaphore</span> }()
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">processBatch</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">b</span>)
</span></span><span style="display:flex;"><span>            }(<span style="color:#a6e22e">batch</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">Done</span>():
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">Err</span>()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">bp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">BatchProcessor</span>) <span style="color:#a6e22e">processBatch</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">batch</span> []<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">cancel</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">WithTimeout</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">timeout</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">cancel</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">item</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">batch</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bp</span>.<span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">Store</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">item</span>, <span style="color:#e6db74">&#34;batch-item&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Failed to store batch item: %v&#34;</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="resource-management">Resource Management</h2>
<h3 id="1-connection-pool-optimization">1. Connection Pool Optimization</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">OptimizedConnectionManager</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pool</span>    <span style="color:#f92672">*</span><span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">DB</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">metrics</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ConnectionMetrics</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">config</span>  <span style="color:#a6e22e">PoolConfig</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PoolConfig</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">MaxOpenConns</span>    <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">MaxIdleConns</span>    <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ConnMaxLifetime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ConnMaxIdleTime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewOptimizedConnectionManager</span>(<span style="color:#a6e22e">dsn</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">config</span> <span style="color:#a6e22e">PoolConfig</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedConnectionManager</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#e6db74">&#34;postgres&#34;</span>, <span style="color:#a6e22e">dsn</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Configure connection pool</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">SetMaxOpenConns</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">MaxOpenConns</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">SetMaxIdleConns</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">MaxIdleConns</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">SetConnMaxLifetime</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">ConnMaxLifetime</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">SetConnMaxIdleTime</span>(<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">ConnMaxIdleTime</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">OptimizedConnectionManager</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">pool</span>:    <span style="color:#a6e22e">db</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metrics</span>: <span style="color:#a6e22e">NewConnectionMetrics</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">config</span>:  <span style="color:#a6e22e">config</span>,
</span></span><span style="display:flex;"><span>    }, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">ocm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OptimizedConnectionManager</span>) <span style="color:#a6e22e">GetConnection</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">conn</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ocm</span>.<span style="color:#a6e22e">pool</span>.<span style="color:#a6e22e">Conn</span>(<span style="color:#a6e22e">ctx</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ocm</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">RecordError</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ocm</span>.<span style="color:#a6e22e">metrics</span>.<span style="color:#a6e22e">RecordAcquisition</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Since</span>(<span style="color:#a6e22e">start</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">conn</span>, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="2-memory-usage-monitoring">2. Memory Usage Monitoring</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MemoryMonitor</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">thresholds</span> <span style="color:#a6e22e">MemoryThresholds</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alerts</span>     <span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Alert</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">interval</span>   <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MemoryThresholds</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">WarningMB</span>  <span style="color:#66d9ef">int64</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">CriticalMB</span> <span style="color:#66d9ef">int64</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Alert</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Level</span>   <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Message</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Time</span>    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewMemoryMonitor</span>(<span style="color:#a6e22e">thresholds</span> <span style="color:#a6e22e">MemoryThresholds</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryMonitor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MemoryMonitor</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">thresholds</span>: <span style="color:#a6e22e">thresholds</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alerts</span>:     make(<span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Alert</span>, <span style="color:#ae81ff">100</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">interval</span>:   <span style="color:#ae81ff">30</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryMonitor</span>) <span style="color:#a6e22e">Start</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ticker</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">NewTicker</span>(<span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">interval</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">ticker</span>.<span style="color:#a6e22e">Stop</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">select</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">Done</span>():
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ticker</span>.<span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">checkMemoryUsage</span>()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryMonitor</span>) <span style="color:#a6e22e">checkMemoryUsage</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">MemStats</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">ReadMemStats</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">heapMB</span> <span style="color:#f92672">:=</span> int64(<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">HeapAlloc</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">1024</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">1024</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">heapMB</span> &gt; <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">thresholds</span>.<span style="color:#a6e22e">CriticalMB</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">alerts</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Alert</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Level</span>:   <span style="color:#e6db74">&#34;CRITICAL&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Message</span>: <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;Memory usage: %d MB&#34;</span>, <span style="color:#a6e22e">heapMB</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Time</span>:    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>(),
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GC</span>() <span style="color:#75715e">// Force garbage collection</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">heapMB</span> &gt; <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">thresholds</span>.<span style="color:#a6e22e">WarningMB</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">alerts</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Alert</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Level</span>:   <span style="color:#e6db74">&#34;WARNING&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Message</span>: <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;Memory usage: %d MB&#34;</span>, <span style="color:#a6e22e">heapMB</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Time</span>:    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>(),
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MemoryMonitor</span>) <span style="color:#a6e22e">GetAlerts</span>() <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">Alert</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">mm</span>.<span style="color:#a6e22e">alerts</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="performance-monitoring">Performance Monitoring</h2>
<h3 id="1-metrics-collection">1. Metrics Collection</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PerformanceMetrics</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">searchLatency</span>    []<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">cacheHitRate</span>     <span style="color:#66d9ef">float64</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">throughput</span>       <span style="color:#66d9ef">int64</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">errorCount</span>       <span style="color:#66d9ef">int64</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mu</span>               <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">RWMutex</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewPerformanceMetrics</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">PerformanceMetrics</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">PerformanceMetrics</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">searchLatency</span>: make([]<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1000</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">pm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">PerformanceMetrics</span>) <span style="color:#a6e22e">RecordSearch</span>(<span style="color:#a6e22e">duration</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>, <span style="color:#a6e22e">cached</span> <span style="color:#66d9ef">bool</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Lock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Unlock</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span> = append(<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>, <span style="color:#a6e22e">duration</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">throughput</span><span style="color:#f92672">++</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Keep only recent measurements</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>) &gt; <span style="color:#ae81ff">1000</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span> = <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>[len(<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>)<span style="color:#f92672">-</span><span style="color:#ae81ff">1000</span>:]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Update cache hit rate</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">cached</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">cacheHitRate</span> = (<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">cacheHitRate</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1.0</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">cacheHitRate</span> = <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">cacheHitRate</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">pm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">PerformanceMetrics</span>) <span style="color:#a6e22e">GetAverageLatency</span>() <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">RLock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">RUnlock</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">total</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">latency</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">total</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">latency</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">total</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>(len(<span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">searchLatency</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">pm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">PerformanceMetrics</span>) <span style="color:#a6e22e">GetReport</span>() <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{} {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">RLock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">RUnlock</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;avg_latency_ms&#34;</span>: <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">GetAverageLatency</span>().<span style="color:#a6e22e">Milliseconds</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;cache_hit_rate&#34;</span>: <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">cacheHitRate</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;throughput&#34;</span>:     <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">throughput</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;error_count&#34;</span>:    <span style="color:#a6e22e">pm</span>.<span style="color:#a6e22e">errorCount</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-configuration-optimization">1. Configuration Optimization</h3>
<ul>
<li><strong>Connection Pooling</strong>: Configure appropriate pool sizes based on workload</li>
<li><strong>Index Selection</strong>: Choose HNSW for better query performance, IVFFlat for faster indexing</li>
<li><strong>Memory Settings</strong>: Tune PostgreSQL memory settings for vector operations</li>
<li><strong>Batch Sizes</strong>: Optimize batch sizes for embedding API calls</li>
<li><strong>Cache Sizes</strong>: Size caches based on available memory and hit rate requirements</li>
</ul>
<h3 id="2-performance-monitoring">2. Performance Monitoring</h3>
<ul>
<li><strong>Latency Tracking</strong>: Monitor search and indexing latencies</li>
<li><strong>Resource Usage</strong>: Track memory, CPU, and disk usage</li>
<li><strong>Cache Performance</strong>: Monitor cache hit rates and effectiveness</li>
<li><strong>Error Rates</strong>: Track and alert on error rates</li>
<li><strong>Throughput</strong>: Monitor requests per second and concurrent users</li>
</ul>
<h3 id="3-scaling-strategies">3. Scaling Strategies</h3>
<ul>
<li><strong>Vertical Scaling</strong>: Increase memory and CPU for single-node performance</li>
<li><strong>Read Replicas</strong>: Use read replicas for read-heavy workloads</li>
<li><strong>Sharding</strong>: Distribute data across multiple nodes for large datasets</li>
<li><strong>Caching Layers</strong>: Implement multiple caching layers for frequently accessed data</li>
<li><strong>Load Balancing</strong>: Distribute requests across multiple instances</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Memory optimization is essential for production-ready agent systems. Key takeaways:</p>
<ul>
<li>Implement comprehensive caching strategies at multiple levels</li>
<li>Monitor resource usage and performance metrics continuously</li>
<li>Optimize database configurations for vector operations</li>
<li>Use appropriate scaling patterns based on workload characteristics</li>
<li>Plan for growth and implement monitoring from the beginning</li>
</ul>
<p>Proper optimization ensures your agents can handle production workloads efficiently and cost-effectively.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/AgenticGoKitDocs/guides/readme/index.html">Production Deployment</a> - Deploy optimized systems</li>
<li><a href="/AgenticGoKitDocs/tutorials/core-concepts/readme/index.html">Monitoring and Observability</a> - Advanced monitoring</li>
<li><a href="/AgenticGoKitDocs/tutorials/readme/index.html">Advanced Patterns</a> - Learn scaling techniques</li>
</ul>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://wiki.postgresql.org/wiki/Performance_Optimization" rel="external" target="_blank">PostgreSQL Performance Tuning</a></li>
<li><a href="https://github.com/erikbern/ann-benchmarks" rel="external" target="_blank">Vector Database Benchmarks</a></li>
<li><a href="https://github.com/dgryski/go-perfbook" rel="external" target="_blank">Go Performance Optimization</a></li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Jul 25, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/AgenticGoKitDocs/index.html">
            <div class="logo-title">AgenticGoKit Docs</div>
          </a>
        </div>
        <search><form action="/AgenticGoKitDocs/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/index.html"><a class="padding" href="/AgenticGoKitDocs/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/readme/index.html">content</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/index.html"><input type="checkbox" id="R-section-8fc2fd7736125e87cab8840a86c2af5a" aria-controls="R-subsections-8fc2fd7736125e87cab8840a86c2af5a" checked><label for="R-section-8fc2fd7736125e87cab8840a86c2af5a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu guides</span></label><a class="padding" href="/AgenticGoKitDocs/guides/index.html">guides</a><ul id="R-subsections-8fc2fd7736125e87cab8840a86c2af5a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/readme/index.html">guides</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/agentbasics/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/agentbasics/index.html">AgentBasics</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/examples/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/examples/index.html">Examples</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/configuration/index.html">Configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/customtools/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/customtools/index.html">CustomTools</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/providers/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/providers/index.html">Providers</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memoryprovidersetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memoryprovidersetup/index.html">MemoryProviderSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memorytroubleshooting/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memorytroubleshooting/index.html">MemoryTroubleshooting</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/embeddingmodelguide/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/embeddingmodelguide/index.html">EmbeddingModelGuide</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/ragconfiguration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/ragconfiguration/index.html">RAGConfiguration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/toolintegration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/toolintegration/index.html">ToolIntegration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/pgvectorsetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/pgvectorsetup/index.html">PgVectorSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/weaviatesetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/weaviatesetup/index.html">WeaviateSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/performance/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/performance/index.html">Performance</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/errorhandling/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/errorhandling/index.html">ErrorHandling</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/deployment/index.html"><input type="checkbox" id="R-section-ecc839349395ef3c015a12132049dff2" aria-controls="R-subsections-ecc839349395ef3c015a12132049dff2" checked><label for="R-section-ecc839349395ef3c015a12132049dff2"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu deployment</span></label><a class="padding" href="/AgenticGoKitDocs/guides/deployment/index.html">deployment</a><ul id="R-subsections-ecc839349395ef3c015a12132049dff2" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/deployment/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/deployment/readme/index.html">deployment</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/development/index.html"><input type="checkbox" id="R-section-fff1f5eca5d0a93209b9c6262762c25a" aria-controls="R-subsections-fff1f5eca5d0a93209b9c6262762c25a" checked><label for="R-section-fff1f5eca5d0a93209b9c6262762c25a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu development</span></label><a class="padding" href="/AgenticGoKitDocs/guides/development/index.html">development</a><ul id="R-subsections-fff1f5eca5d0a93209b9c6262762c25a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/readme/index.html">development</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/best-practices/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/best-practices/index.html">best-practices</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/debugging/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/debugging/index.html">debugging</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/research-assistant/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/research-assistant/index.html">research-assistant</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/testing-agents/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/testing-agents/index.html">testing-agents</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/visualization/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/visualization/index.html">visualization</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/web-search-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/web-search-integration/index.html">web-search-integration</a></li></ul></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/framework-comparison/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/framework-comparison/index.html">framework-comparison</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memory/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memory/index.html">Memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/scaffoldmemoryguide/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/scaffoldmemoryguide/index.html">ScaffoldMemoryGuide</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/setup/index.html"><input type="checkbox" id="R-section-0124aed9abb5064d53391168f3c95c22" aria-controls="R-subsections-0124aed9abb5064d53391168f3c95c22" checked><label for="R-section-0124aed9abb5064d53391168f3c95c22"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu setup</span></label><a class="padding" href="/AgenticGoKitDocs/guides/setup/index.html">setup</a><ul id="R-subsections-0124aed9abb5064d53391168f3c95c22" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/readme/index.html">setup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/llm-providers/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/llm-providers/index.html">llm-providers</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/mcp-tools/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/mcp-tools/index.html">mcp-tools</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/orchestration-configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/orchestration-configuration/index.html">orchestration-configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/vector-databases/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/vector-databases/index.html">vector-databases</a></li></ul></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/troubleshooting/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/troubleshooting/index.html">troubleshooting</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/contributors/index.html"><input type="checkbox" id="R-section-190d9b328fbda7e13ab386f7a5417de5" aria-controls="R-subsections-190d9b328fbda7e13ab386f7a5417de5" checked><label for="R-section-190d9b328fbda7e13ab386f7a5417de5"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu contributors</span></label><a class="padding" href="/AgenticGoKitDocs/contributors/index.html">contributors</a><ul id="R-subsections-190d9b328fbda7e13ab386f7a5417de5" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/readme/index.html">contributors</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/contributorguide/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/contributorguide/index.html">ContributorGuide</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/codestyle/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/codestyle/index.html">CodeStyle</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/corevsinternal/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/corevsinternal/index.html">CoreVsInternal</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/addingfeatures/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/addingfeatures/index.html">AddingFeatures</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/testing/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/testing/index.html">Testing</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/docsstandards/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/docsstandards/index.html">DocsStandards</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/reference/index.html"><input type="checkbox" id="R-section-66002f201bef818664bb81aa67490c58" aria-controls="R-subsections-66002f201bef818664bb81aa67490c58" checked><label for="R-section-66002f201bef818664bb81aa67490c58"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu reference</span></label><a class="padding" href="/AgenticGoKitDocs/reference/index.html">reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/readme/index.html">reference</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/configuration/index.html">configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/cli/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/cli/index.html">cli</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/mcp/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/mcp/index.html">mcp</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/agent/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/agent/index.html">agent</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/memory/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/memory/index.html">memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/orchestration/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/orchestration/index.html">orchestration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/state-event/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/state-event/index.html">state-event</a></li></ul></li>
            <li class="parent alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/index.html"><input type="checkbox" id="R-section-e1e8c1e70c5500b49e8dda2dc550651a" aria-controls="R-subsections-e1e8c1e70c5500b49e8dda2dc550651a" checked><label for="R-section-e1e8c1e70c5500b49e8dda2dc550651a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu tutorials</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/index.html">tutorials</a><ul id="R-subsections-e1e8c1e70c5500b49e8dda2dc550651a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/readme/index.html">tutorials</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/advanced/index.html"><input type="checkbox" id="R-section-d3def5cd76adc8096d0ff9fda6b8e479" aria-controls="R-subsections-d3def5cd76adc8096d0ff9fda6b8e479" checked><label for="R-section-d3def5cd76adc8096d0ff9fda6b8e479"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu advanced</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/index.html">advanced</a><ul id="R-subsections-d3def5cd76adc8096d0ff9fda6b8e479" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/readme/index.html">advanced</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/circuit-breaker-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/circuit-breaker-patterns/index.html">circuit-breaker-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/load-balancing-scaling/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/load-balancing-scaling/index.html">load-balancing-scaling</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/retry-policies/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/retry-policies/index.html">retry-policies</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/testing-strategies/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/testing-strategies/index.html">testing-strategies</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/index.html"><input type="checkbox" id="R-section-212c6ccffb40ecdd78eb2136f98c4cac" aria-controls="R-subsections-212c6ccffb40ecdd78eb2136f98c4cac" checked><label for="R-section-212c6ccffb40ecdd78eb2136f98c4cac"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu core-concepts</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/index.html">core-concepts</a><ul id="R-subsections-212c6ccffb40ecdd78eb2136f98c4cac" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/readme/index.html">core-concepts</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/agent-lifecycle/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/agent-lifecycle/index.html">agent-lifecycle</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/error-handling/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/error-handling/index.html">error-handling</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/message-passing/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/message-passing/index.html">message-passing</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/orchestration-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/orchestration-patterns/index.html">orchestration-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/state-management/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/state-management/index.html">state-management</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/debugging/index.html"><input type="checkbox" id="R-section-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" aria-controls="R-subsections-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" checked><label for="R-section-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu debugging</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/index.html">debugging</a><ul id="R-subsections-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/readme/index.html">debugging</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/debugging-multi-agent-systems/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/debugging-multi-agent-systems/index.html">debugging-multi-agent-systems</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/logging-and-tracing/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/logging-and-tracing/index.html">logging-and-tracing</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/index.html"><input type="checkbox" id="R-section-e7f904c8b9d0f9bf1f07ca7d482d2247" aria-controls="R-subsections-e7f904c8b9d0f9bf1f07ca7d482d2247" checked><label for="R-section-e7f904c8b9d0f9bf1f07ca7d482d2247"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu getting-started</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/index.html">getting-started</a><ul id="R-subsections-e7f904c8b9d0f9bf1f07ca7d482d2247" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/readme/index.html">getting-started</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/memory-and-rag/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/memory-and-rag/index.html">memory-and-rag</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/multi-agent-collaboration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/multi-agent-collaboration/index.html">multi-agent-collaboration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/production-deployment/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/production-deployment/index.html">production-deployment</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/quickstart/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/quickstart/index.html">quickstart</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/tool-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/tool-integration/index.html">tool-integration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/your-first-agent/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/your-first-agent/index.html">your-first-agent</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/mcp/index.html"><input type="checkbox" id="R-section-153aac44598009a99dd5a60317a3eecc" aria-controls="R-subsections-153aac44598009a99dd5a60317a3eecc" checked><label for="R-section-153aac44598009a99dd5a60317a3eecc"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu mcp</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/index.html">mcp</a><ul id="R-subsections-153aac44598009a99dd5a60317a3eecc" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/readme/index.html">mcp</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/advanced-tool-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/advanced-tool-patterns/index.html">advanced-tool-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/tool-development/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/tool-development/index.html">tool-development</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/tool-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/tool-integration/index.html">tool-integration</a></li></ul></li>
            <li class="parent alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/index.html"><input type="checkbox" id="R-section-9c1a65f2d7b3888241dcafa51a0710e7" aria-controls="R-subsections-9c1a65f2d7b3888241dcafa51a0710e7" checked><label for="R-section-9c1a65f2d7b3888241dcafa51a0710e7"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu memory-systems</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/index.html">memory-systems</a><ul id="R-subsections-9c1a65f2d7b3888241dcafa51a0710e7" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/readme/index.html">memory-systems</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/basic-memory/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/basic-memory/index.html">basic-memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/document-ingestion/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/document-ingestion/index.html">document-ingestion</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html">knowledge-bases</a></li>
            <li class="active " data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html">memory-optimization</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html">rag-implementation</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/vector-databases/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/vector-databases/index.html">vector-databases</a></li></ul></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/AgenticGoKitDocs/js/clipboard/clipboard.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/perfect-scrollbar/perfect-scrollbar.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/theme.js?1753430931" defer></script>
  </body>
</html>
