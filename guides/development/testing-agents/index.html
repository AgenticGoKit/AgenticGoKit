<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/AgenticGoKitDocs/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=AgenticGoKitDocs/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="description" content="Testing Agents Comprehensive testing strategies for multi-agent systems
This guide covers testing approaches for AgenticGoKit applications, from unit testing individual agents to integration testing complex multi-agent workflows.
Testing Philosophy AgenticGoKit testing follows these principles:
Test at multiple levels: Unit, integration, and end-to-end Mock external dependencies: LLM providers, databases, external APIs Test orchestration patterns: Verify agent interactions work correctly Performance testing: Ensure agents meet performance requirements Deterministic testing: Use mocks to ensure reproducible results Quick Start (10 minutes) 1. Basic Agent Unit Test package main import ( &#34;context&#34; &#34;testing&#34; &#34;github.com/stretchr/testify/assert&#34; &#34;github.com/stretchr/testify/require&#34; &#34;github.com/kunalkushwaha/agenticgokit/core&#34; ) func TestGreetingAgent(t *testing.T) { // Create mock LLM provider mockLLM := &amp;MockLLMProvider{ response: &#34;Hello, World! Nice to meet you.&#34;, } // Create agent agent := NewGreetingAgent(&#34;greeter&#34;, mockLLM) // Create test event event := core.NewEvent(&#34;greeting&#34;, map[string]interface{}{ &#34;name&#34;: &#34;World&#34;, }) // Execute agent result, err := agent.Run(context.Background(), event, core.NewState()) // Verify results require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;Hello&#34;) assert.Contains(t, result.Data[&#34;response&#34;], &#34;World&#34;) } // Mock LLM Provider for testing type MockLLMProvider struct { response string err error } func (m *MockLLMProvider) Generate(ctx context.Context, prompt string) (string, error) { if m.err != nil { return &#34;&#34;, m.err } return m.response, nil } func (m *MockLLMProvider) Name() string { return &#34;mock&#34; }2. Multi-Agent Integration Test func TestMultiAgentWorkflow(t *testing.T) { // Create mock providers mockLLM := &amp;MockLLMProvider{ response: &#34;Processed successfully&#34;, } // Create agents agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: NewAnalyzerAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM), } // Create sequential runner runner := core.CreateSequentialRunner(agents, []string{&#34;analyzer&#34;, &#34;processor&#34;}, 30*time.Second) // Test workflow event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;data&#34;: &#34;test data&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Contains(t, results, &#34;analyzer&#34;) assert.Contains(t, results, &#34;processor&#34;) }Unit Testing Patterns Testing Agent Logic func TestDataProcessingAgent(t *testing.T) { tests := []struct { name string input map[string]interface{} expected map[string]interface{} wantErr bool }{ { name: &#34;valid data processing&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{1, 2, 3, 4, 5}, }, expected: map[string]interface{}{ &#34;sum&#34;: 15, &#34;average&#34;: 3.0, &#34;count&#34;: 5, }, wantErr: false, }, { name: &#34;empty data&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{}, }, expected: nil, wantErr: true, }, { name: &#34;invalid input type&#34;, input: map[string]interface{}{ &#34;numbers&#34;: &#34;not a slice&#34;, }, expected: nil, wantErr: true, }, } for _, tt := range tests { t.Run(tt.name, func(t *testing.T) { agent := NewDataProcessingAgent() event := core.NewEvent(&#34;process&#34;, tt.input) result, err := agent.Run(context.Background(), event, core.NewState()) if tt.wantErr { assert.Error(t, err) return } require.NoError(t, err) for key, expectedValue := range tt.expected { assert.Equal(t, expectedValue, result.Data[key]) } }) } }Testing State Management func TestAgentStateHandling(t *testing.T) { agent := NewStatefulAgent() // Test state initialization initialState := core.NewState() initialState.Set(&#34;counter&#34;, 0) event := core.NewEvent(&#34;increment&#34;, nil) // First execution result1, err := agent.Run(context.Background(), event, initialState) require.NoError(t, err) assert.Equal(t, 1, result1.Data[&#34;counter&#34;]) // Second execution with updated state result2, err := agent.Run(context.Background(), event, result1.State) require.NoError(t, err) assert.Equal(t, 2, result2.Data[&#34;counter&#34;]) // Verify state persistence assert.Equal(t, 2, result2.State.Get(&#34;counter&#34;)) }Testing Error Handling func TestAgentErrorHandling(t *testing.T) { // Test with failing LLM provider failingLLM := &amp;MockLLMProvider{ err: errors.New(&#34;LLM service unavailable&#34;), } agent := NewResilientAgent(failingLLM) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) // Agent should handle LLM failure gracefully require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;service temporarily unavailable&#34;) assert.True(t, result.Data[&#34;fallback_used&#34;].(bool)) }Integration Testing Testing Orchestration Patterns func TestSequentialOrchestration(t *testing.T) { // Create agents that depend on each other agents := map[string]core.AgentHandler{ &#34;step1&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { input := event.Data[&#34;input&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;step1_output&#34;: input &#43; &#34;_processed&#34;, }, }, nil }), &#34;step2&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { step1Output := state.Data[&#34;step1_output&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;final_output&#34;: step1Output &#43; &#34;_finalized&#34;, }, }, nil }), } runner := core.CreateSequentialRunner(agents, []string{&#34;step1&#34;, &#34;step2&#34;}, 30*time.Second) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Equal(t, &#34;test_processed_finalized&#34;, results[&#34;step2&#34;].Data[&#34;final_output&#34;]) } func TestCollaborativeOrchestration(t *testing.T) { // Create agents that work in parallel agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;analysis&#34;: &#34;positive sentiment&#34;, }, }, nil }), &#34;summarizer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;summary&#34;: &#34;brief summary&#34;, }, }, nil }), } runner := core.CreateCollaborativeRunner(agents, 30*time.Second) event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;text&#34;: &#34;This is great!&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Equal(t, &#34;positive sentiment&#34;, results[&#34;analyzer&#34;].Data[&#34;analysis&#34;]) assert.Equal(t, &#34;brief summary&#34;, results[&#34;summarizer&#34;].Data[&#34;summary&#34;]) }Testing Memory Integration func TestAgentWithMemory(t *testing.T) { // Create in-memory provider for testing memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() // Create memory-enabled agent agent := NewMemoryEnabledAgent(memory) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) // First interaction - store information event1 := core.NewEvent(&#34;remember&#34;, map[string]interface{}{ &#34;info&#34;: &#34;User likes coffee&#34;, }) result1, err := agent.Run(ctx, event1, core.NewState()) require.NoError(t, err) assert.Contains(t, result1.Data[&#34;response&#34;], &#34;remembered&#34;) // Second interaction - recall information event2 := core.NewEvent(&#34;recall&#34;, map[string]interface{}{ &#34;query&#34;: &#34;What does the user like?&#34;, }) result2, err := agent.Run(ctx, event2, core.NewState()) require.NoError(t, err) assert.Contains(t, result2.Data[&#34;response&#34;], &#34;coffee&#34;) }Testing MCP Tool Integration func TestAgentWithMCPTools(t *testing.T) { // Create mock MCP manager mockMCP := &amp;MockMCPManager{ tools: []core.ToolSchema{ { Name: &#34;search&#34;, Description: &#34;Search for information&#34;, }, }, responses: map[string]interface{}{ &#34;search&#34;: map[string]interface{}{ &#34;results&#34;: []string{&#34;Mock search result&#34;}, }, }, } mockLLM := &amp;MockLLMProvider{ response: `I&#39;ll search for that information. &lt;tool_call&gt; {&#34;name&#34;: &#34;search&#34;, &#34;args&#34;: {&#34;query&#34;: &#34;test query&#34;}} &lt;/tool_call&gt; Based on the search results, here&#39;s what I found...`, } agent := NewToolEnabledAgent(mockLLM, mockMCP) event := core.NewEvent(&#34;query&#34;, map[string]interface{}{ &#34;question&#34;: &#34;Search for test information&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) assert.True(t, result.Data[&#34;tools_used&#34;].(bool)) assert.Contains(t, result.Data[&#34;tool_results&#34;], &#34;Mock search result&#34;) } type MockMCPManager struct { tools []core.ToolSchema responses map[string]interface{} } func (m *MockMCPManager) ListTools(ctx context.Context) ([]core.ToolSchema, error) { return m.tools, nil } func (m *MockMCPManager) CallTool(ctx context.Context, name string, args map[string]interface{}) (interface{}, error) { if response, exists := m.responses[name]; exists { return response, nil } return nil, fmt.Errorf(&#34;tool not found: %s&#34;, name) }Performance Testing Load Testing func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance test in short mode&#34;) } agent := NewPerformantAgent() // Test concurrent execution concurrency := 10 iterations := 100 var wg sync.WaitGroup results := make(chan time.Duration, concurrency*iterations) for i := 0; i &lt; concurrency; i&#43;&#43; { wg.Add(1) go func() { defer wg.Done() for j := 0; j &lt; iterations; j&#43;&#43; { start := time.Now() event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: fmt.Sprintf(&#34;test_%d_%d&#34;, i, j), }) _, err := agent.Run(context.Background(), event, core.NewState()) duration := time.Since(start) require.NoError(t, err) results &lt;- duration } }() } wg.Wait() close(results) // Analyze performance var total time.Duration var max time.Duration count := 0 for duration := range results { total &#43;= duration if duration &gt; max { max = duration } count&#43;&#43; } average := total / time.Duration(count) t.Logf(&#34;Performance Results:&#34;) t.Logf(&#34; Total requests: %d&#34;, count) t.Logf(&#34; Average duration: %v&#34;, average) t.Logf(&#34; Max duration: %v&#34;, max) t.Logf(&#34; Requests per second: %.2f&#34;, float64(count)/total.Seconds()) // Assert performance requirements assert.Less(t, average, 100*time.Millisecond, &#34;Average response time should be under 100ms&#34;) assert.Less(t, max, 500*time.Millisecond, &#34;Max response time should be under 500ms&#34;) }Memory Usage Testing func TestAgentMemoryUsage(t *testing.T) { agent := NewMemoryEfficientAgent() // Measure initial memory var m1 runtime.MemStats runtime.GC() runtime.ReadMemStats(&amp;m1) // Run many iterations for i := 0; i &lt; 1000; i&#43;&#43; { event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: strings.Repeat(&#34;x&#34;, 1000), // 1KB of data }) _, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) } // Force garbage collection and measure final memory runtime.GC() var m2 runtime.MemStats runtime.ReadMemStats(&amp;m2) // Calculate memory increase memoryIncrease := m2.Alloc - m1.Alloc t.Logf(&#34;Memory usage:&#34;) t.Logf(&#34; Initial: %d KB&#34;, m1.Alloc/1024) t.Logf(&#34; Final: %d KB&#34;, m2.Alloc/1024) t.Logf(&#34; Increase: %d KB&#34;, memoryIncrease/1024) // Assert reasonable memory usage (adjust threshold as needed) assert.Less(t, memoryIncrease, uint64(10*1024*1024), &#34;Memory increase should be less than 10MB&#34;) }End-to-End Testing Complete Workflow Testing func TestCompleteWorkflow(t *testing.T) { // Set up complete system memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() mockLLM := &amp;MockLLMProvider{ response: &#34;I understand your request and will process it accordingly.&#34;, } // Create complete agent system agents := map[string]core.AgentHandler{ &#34;intake&#34;: NewIntakeAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM, memory), &#34;responder&#34;: NewResponderAgent(mockLLM), } runner := core.CreateSequentialRunner(agents, []string{&#34;intake&#34;, &#34;processor&#34;, &#34;responder&#34;}, 60*time.Second) // Test complete user interaction ctx := memory.SetSession(context.Background(), &#34;e2e-test-session&#34;) event := core.NewEvent(&#34;user_request&#34;, map[string]interface{}{ &#34;message&#34;: &#34;I need help with my project&#34;, &#34;user_id&#34;: &#34;test_user&#34;, }) results, err := runner.ProcessEvent(ctx, event) require.NoError(t, err) assert.Len(t, results, 3) // Verify each stage completed successfully assert.Contains(t, results[&#34;intake&#34;].Data, &#34;processed&#34;) assert.Contains(t, results[&#34;processor&#34;].Data, &#34;analyzed&#34;) assert.Contains(t, results[&#34;responder&#34;].Data, &#34;response&#34;) // Verify final response quality finalResponse := results[&#34;responder&#34;].Data[&#34;response&#34;].(string) assert.NotEmpty(t, finalResponse) assert.Greater(t, len(finalResponse), 10) }Test Utilities and Helpers Test Data Builders // Event builder for consistent test data type EventBuilder struct { eventType string data map[string]interface{} metadata map[string]interface{} } func NewEventBuilder(eventType string) *EventBuilder { return &amp;EventBuilder{ eventType: eventType, data: make(map[string]interface{}), metadata: make(map[string]interface{}), } } func (eb *EventBuilder) WithData(key string, value interface{}) *EventBuilder { eb.data[key] = value return eb } func (eb *EventBuilder) WithMetadata(key string, value interface{}) *EventBuilder { eb.metadata[key] = value return eb } func (eb *EventBuilder) Build() core.Event { event := core.NewEvent(eb.eventType, eb.data) for k, v := range eb.metadata { event.Metadata[k] = v } return event } // Usage in tests func TestWithEventBuilder(t *testing.T) { event := NewEventBuilder(&#34;process&#34;). WithData(&#34;input&#34;, &#34;test data&#34;). WithData(&#34;priority&#34;, &#34;high&#34;). WithMetadata(&#34;user_id&#34;, &#34;123&#34;). Build() // Use event in test... }Agent Test Harness type AgentTestHarness struct { agent core.AgentHandler mockLLM *MockLLMProvider memory core.Memory ctx context.Context } func NewAgentTestHarness(agent core.AgentHandler) *AgentTestHarness { mockLLM := &amp;MockLLMProvider{} memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, _ := core.NewMemory(memoryConfig) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) return &amp;AgentTestHarness{ agent: agent, mockLLM: mockLLM, memory: memory, ctx: ctx, } } func (h *AgentTestHarness) SetLLMResponse(response string) { h.mockLLM.response = response } func (h *AgentTestHarness) SetLLMError(err error) { h.mockLLM.err = err } func (h *AgentTestHarness) Execute(event core.Event) (core.AgentResult, error) { return h.agent.Run(h.ctx, event, core.NewState()) } func (h *AgentTestHarness) Cleanup() { if h.memory != nil { h.memory.Close() } } // Usage in tests func TestWithHarness(t *testing.T) { harness := NewAgentTestHarness(NewMyAgent()) defer harness.Cleanup() harness.SetLLMResponse(&#34;Expected response&#34;) event := core.NewEvent(&#34;test&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test data&#34;, }) result, err := harness.Execute(event) require.NoError(t, err) assert.Equal(t, &#34;Expected response&#34;, result.Data[&#34;response&#34;]) }Continuous Integration GitHub Actions Test Configuration # .github/workflows/test.yml name: Test on: push: branches: [ main, develop ] pull_request: branches: [ main ] jobs: test: runs-on: ubuntu-latest services: postgres: image: pgvector/pgvector:pg15 env: POSTGRES_PASSWORD: password POSTGRES_DB: agentflow_test options: &gt;- --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5 ports: - 5432:5432 steps: - uses: actions/checkout@v3 - name: Set up Go uses: actions/setup-go@v3 with: go-version: 1.21 - name: Install dependencies run: go mod download - name: Run unit tests run: go test -v -short ./... - name: Run integration tests run: go test -v ./... env: TEST_DB_URL: postgres://postgres:password@localhost:5432/agentflow_test?sslmode=disable - name: Run performance tests run: go test -v -run TestPerformance ./... - name: Generate coverage report run: go test -coverprofile=coverage.out ./... - name: Upload coverage to Codecov uses: codecov/codecov-action@v3 with: file: ./coverage.outBest Practices Test Organization // Organize tests by functionality func TestAgentCore(t *testing.T) { t.Run(&#34;BasicExecution&#34;, testBasicExecution) t.Run(&#34;ErrorHandling&#34;, testErrorHandling) t.Run(&#34;StateManagement&#34;, testStateManagement) } func TestAgentIntegration(t *testing.T) { t.Run(&#34;WithMemory&#34;, testWithMemory) t.Run(&#34;WithTools&#34;, testWithTools) t.Run(&#34;WithOrchestration&#34;, testWithOrchestration) } func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance tests in short mode&#34;) } t.Run(&#34;LoadTest&#34;, testLoadTest) t.Run(&#34;MemoryUsage&#34;, testMemoryUsage) t.Run(&#34;Concurrency&#34;, testConcurrency) }Test Data Management // Use table-driven tests for multiple scenarios func TestDataProcessing(t *testing.T) { testCases := []struct { name string input interface{} expected interface{} wantErr bool }{ // Test cases here... } for _, tc := range testCases { t.Run(tc.name, func(t *testing.T) { // Test implementation... }) } } // Use test fixtures for complex data func loadTestFixture(t *testing.T, filename string) map[string]interface{} { data, err := os.ReadFile(filepath.Join(&#34;testdata&#34;, filename)) require.NoError(t, err) var result map[string]interface{} err = json.Unmarshal(data, &amp;result) require.NoError(t, err) return result }Next Steps Debugging - Debug agent interactions effectively Best Practices - Development best practices Production Deployment - Production deployment">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="testing-agents :: AgenticGoKit Docs">
    <meta name="twitter:description" content="Testing Agents Comprehensive testing strategies for multi-agent systems
This guide covers testing approaches for AgenticGoKit applications, from unit testing individual agents to integration testing complex multi-agent workflows.
Testing Philosophy AgenticGoKit testing follows these principles:
Test at multiple levels: Unit, integration, and end-to-end Mock external dependencies: LLM providers, databases, external APIs Test orchestration patterns: Verify agent interactions work correctly Performance testing: Ensure agents meet performance requirements Deterministic testing: Use mocks to ensure reproducible results Quick Start (10 minutes) 1. Basic Agent Unit Test package main import ( &#34;context&#34; &#34;testing&#34; &#34;github.com/stretchr/testify/assert&#34; &#34;github.com/stretchr/testify/require&#34; &#34;github.com/kunalkushwaha/agenticgokit/core&#34; ) func TestGreetingAgent(t *testing.T) { // Create mock LLM provider mockLLM := &amp;MockLLMProvider{ response: &#34;Hello, World! Nice to meet you.&#34;, } // Create agent agent := NewGreetingAgent(&#34;greeter&#34;, mockLLM) // Create test event event := core.NewEvent(&#34;greeting&#34;, map[string]interface{}{ &#34;name&#34;: &#34;World&#34;, }) // Execute agent result, err := agent.Run(context.Background(), event, core.NewState()) // Verify results require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;Hello&#34;) assert.Contains(t, result.Data[&#34;response&#34;], &#34;World&#34;) } // Mock LLM Provider for testing type MockLLMProvider struct { response string err error } func (m *MockLLMProvider) Generate(ctx context.Context, prompt string) (string, error) { if m.err != nil { return &#34;&#34;, m.err } return m.response, nil } func (m *MockLLMProvider) Name() string { return &#34;mock&#34; }2. Multi-Agent Integration Test func TestMultiAgentWorkflow(t *testing.T) { // Create mock providers mockLLM := &amp;MockLLMProvider{ response: &#34;Processed successfully&#34;, } // Create agents agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: NewAnalyzerAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM), } // Create sequential runner runner := core.CreateSequentialRunner(agents, []string{&#34;analyzer&#34;, &#34;processor&#34;}, 30*time.Second) // Test workflow event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;data&#34;: &#34;test data&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Contains(t, results, &#34;analyzer&#34;) assert.Contains(t, results, &#34;processor&#34;) }Unit Testing Patterns Testing Agent Logic func TestDataProcessingAgent(t *testing.T) { tests := []struct { name string input map[string]interface{} expected map[string]interface{} wantErr bool }{ { name: &#34;valid data processing&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{1, 2, 3, 4, 5}, }, expected: map[string]interface{}{ &#34;sum&#34;: 15, &#34;average&#34;: 3.0, &#34;count&#34;: 5, }, wantErr: false, }, { name: &#34;empty data&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{}, }, expected: nil, wantErr: true, }, { name: &#34;invalid input type&#34;, input: map[string]interface{}{ &#34;numbers&#34;: &#34;not a slice&#34;, }, expected: nil, wantErr: true, }, } for _, tt := range tests { t.Run(tt.name, func(t *testing.T) { agent := NewDataProcessingAgent() event := core.NewEvent(&#34;process&#34;, tt.input) result, err := agent.Run(context.Background(), event, core.NewState()) if tt.wantErr { assert.Error(t, err) return } require.NoError(t, err) for key, expectedValue := range tt.expected { assert.Equal(t, expectedValue, result.Data[key]) } }) } }Testing State Management func TestAgentStateHandling(t *testing.T) { agent := NewStatefulAgent() // Test state initialization initialState := core.NewState() initialState.Set(&#34;counter&#34;, 0) event := core.NewEvent(&#34;increment&#34;, nil) // First execution result1, err := agent.Run(context.Background(), event, initialState) require.NoError(t, err) assert.Equal(t, 1, result1.Data[&#34;counter&#34;]) // Second execution with updated state result2, err := agent.Run(context.Background(), event, result1.State) require.NoError(t, err) assert.Equal(t, 2, result2.Data[&#34;counter&#34;]) // Verify state persistence assert.Equal(t, 2, result2.State.Get(&#34;counter&#34;)) }Testing Error Handling func TestAgentErrorHandling(t *testing.T) { // Test with failing LLM provider failingLLM := &amp;MockLLMProvider{ err: errors.New(&#34;LLM service unavailable&#34;), } agent := NewResilientAgent(failingLLM) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) // Agent should handle LLM failure gracefully require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;service temporarily unavailable&#34;) assert.True(t, result.Data[&#34;fallback_used&#34;].(bool)) }Integration Testing Testing Orchestration Patterns func TestSequentialOrchestration(t *testing.T) { // Create agents that depend on each other agents := map[string]core.AgentHandler{ &#34;step1&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { input := event.Data[&#34;input&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;step1_output&#34;: input &#43; &#34;_processed&#34;, }, }, nil }), &#34;step2&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { step1Output := state.Data[&#34;step1_output&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;final_output&#34;: step1Output &#43; &#34;_finalized&#34;, }, }, nil }), } runner := core.CreateSequentialRunner(agents, []string{&#34;step1&#34;, &#34;step2&#34;}, 30*time.Second) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Equal(t, &#34;test_processed_finalized&#34;, results[&#34;step2&#34;].Data[&#34;final_output&#34;]) } func TestCollaborativeOrchestration(t *testing.T) { // Create agents that work in parallel agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;analysis&#34;: &#34;positive sentiment&#34;, }, }, nil }), &#34;summarizer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;summary&#34;: &#34;brief summary&#34;, }, }, nil }), } runner := core.CreateCollaborativeRunner(agents, 30*time.Second) event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;text&#34;: &#34;This is great!&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Equal(t, &#34;positive sentiment&#34;, results[&#34;analyzer&#34;].Data[&#34;analysis&#34;]) assert.Equal(t, &#34;brief summary&#34;, results[&#34;summarizer&#34;].Data[&#34;summary&#34;]) }Testing Memory Integration func TestAgentWithMemory(t *testing.T) { // Create in-memory provider for testing memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() // Create memory-enabled agent agent := NewMemoryEnabledAgent(memory) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) // First interaction - store information event1 := core.NewEvent(&#34;remember&#34;, map[string]interface{}{ &#34;info&#34;: &#34;User likes coffee&#34;, }) result1, err := agent.Run(ctx, event1, core.NewState()) require.NoError(t, err) assert.Contains(t, result1.Data[&#34;response&#34;], &#34;remembered&#34;) // Second interaction - recall information event2 := core.NewEvent(&#34;recall&#34;, map[string]interface{}{ &#34;query&#34;: &#34;What does the user like?&#34;, }) result2, err := agent.Run(ctx, event2, core.NewState()) require.NoError(t, err) assert.Contains(t, result2.Data[&#34;response&#34;], &#34;coffee&#34;) }Testing MCP Tool Integration func TestAgentWithMCPTools(t *testing.T) { // Create mock MCP manager mockMCP := &amp;MockMCPManager{ tools: []core.ToolSchema{ { Name: &#34;search&#34;, Description: &#34;Search for information&#34;, }, }, responses: map[string]interface{}{ &#34;search&#34;: map[string]interface{}{ &#34;results&#34;: []string{&#34;Mock search result&#34;}, }, }, } mockLLM := &amp;MockLLMProvider{ response: `I&#39;ll search for that information. &lt;tool_call&gt; {&#34;name&#34;: &#34;search&#34;, &#34;args&#34;: {&#34;query&#34;: &#34;test query&#34;}} &lt;/tool_call&gt; Based on the search results, here&#39;s what I found...`, } agent := NewToolEnabledAgent(mockLLM, mockMCP) event := core.NewEvent(&#34;query&#34;, map[string]interface{}{ &#34;question&#34;: &#34;Search for test information&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) assert.True(t, result.Data[&#34;tools_used&#34;].(bool)) assert.Contains(t, result.Data[&#34;tool_results&#34;], &#34;Mock search result&#34;) } type MockMCPManager struct { tools []core.ToolSchema responses map[string]interface{} } func (m *MockMCPManager) ListTools(ctx context.Context) ([]core.ToolSchema, error) { return m.tools, nil } func (m *MockMCPManager) CallTool(ctx context.Context, name string, args map[string]interface{}) (interface{}, error) { if response, exists := m.responses[name]; exists { return response, nil } return nil, fmt.Errorf(&#34;tool not found: %s&#34;, name) }Performance Testing Load Testing func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance test in short mode&#34;) } agent := NewPerformantAgent() // Test concurrent execution concurrency := 10 iterations := 100 var wg sync.WaitGroup results := make(chan time.Duration, concurrency*iterations) for i := 0; i &lt; concurrency; i&#43;&#43; { wg.Add(1) go func() { defer wg.Done() for j := 0; j &lt; iterations; j&#43;&#43; { start := time.Now() event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: fmt.Sprintf(&#34;test_%d_%d&#34;, i, j), }) _, err := agent.Run(context.Background(), event, core.NewState()) duration := time.Since(start) require.NoError(t, err) results &lt;- duration } }() } wg.Wait() close(results) // Analyze performance var total time.Duration var max time.Duration count := 0 for duration := range results { total &#43;= duration if duration &gt; max { max = duration } count&#43;&#43; } average := total / time.Duration(count) t.Logf(&#34;Performance Results:&#34;) t.Logf(&#34; Total requests: %d&#34;, count) t.Logf(&#34; Average duration: %v&#34;, average) t.Logf(&#34; Max duration: %v&#34;, max) t.Logf(&#34; Requests per second: %.2f&#34;, float64(count)/total.Seconds()) // Assert performance requirements assert.Less(t, average, 100*time.Millisecond, &#34;Average response time should be under 100ms&#34;) assert.Less(t, max, 500*time.Millisecond, &#34;Max response time should be under 500ms&#34;) }Memory Usage Testing func TestAgentMemoryUsage(t *testing.T) { agent := NewMemoryEfficientAgent() // Measure initial memory var m1 runtime.MemStats runtime.GC() runtime.ReadMemStats(&amp;m1) // Run many iterations for i := 0; i &lt; 1000; i&#43;&#43; { event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: strings.Repeat(&#34;x&#34;, 1000), // 1KB of data }) _, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) } // Force garbage collection and measure final memory runtime.GC() var m2 runtime.MemStats runtime.ReadMemStats(&amp;m2) // Calculate memory increase memoryIncrease := m2.Alloc - m1.Alloc t.Logf(&#34;Memory usage:&#34;) t.Logf(&#34; Initial: %d KB&#34;, m1.Alloc/1024) t.Logf(&#34; Final: %d KB&#34;, m2.Alloc/1024) t.Logf(&#34; Increase: %d KB&#34;, memoryIncrease/1024) // Assert reasonable memory usage (adjust threshold as needed) assert.Less(t, memoryIncrease, uint64(10*1024*1024), &#34;Memory increase should be less than 10MB&#34;) }End-to-End Testing Complete Workflow Testing func TestCompleteWorkflow(t *testing.T) { // Set up complete system memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() mockLLM := &amp;MockLLMProvider{ response: &#34;I understand your request and will process it accordingly.&#34;, } // Create complete agent system agents := map[string]core.AgentHandler{ &#34;intake&#34;: NewIntakeAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM, memory), &#34;responder&#34;: NewResponderAgent(mockLLM), } runner := core.CreateSequentialRunner(agents, []string{&#34;intake&#34;, &#34;processor&#34;, &#34;responder&#34;}, 60*time.Second) // Test complete user interaction ctx := memory.SetSession(context.Background(), &#34;e2e-test-session&#34;) event := core.NewEvent(&#34;user_request&#34;, map[string]interface{}{ &#34;message&#34;: &#34;I need help with my project&#34;, &#34;user_id&#34;: &#34;test_user&#34;, }) results, err := runner.ProcessEvent(ctx, event) require.NoError(t, err) assert.Len(t, results, 3) // Verify each stage completed successfully assert.Contains(t, results[&#34;intake&#34;].Data, &#34;processed&#34;) assert.Contains(t, results[&#34;processor&#34;].Data, &#34;analyzed&#34;) assert.Contains(t, results[&#34;responder&#34;].Data, &#34;response&#34;) // Verify final response quality finalResponse := results[&#34;responder&#34;].Data[&#34;response&#34;].(string) assert.NotEmpty(t, finalResponse) assert.Greater(t, len(finalResponse), 10) }Test Utilities and Helpers Test Data Builders // Event builder for consistent test data type EventBuilder struct { eventType string data map[string]interface{} metadata map[string]interface{} } func NewEventBuilder(eventType string) *EventBuilder { return &amp;EventBuilder{ eventType: eventType, data: make(map[string]interface{}), metadata: make(map[string]interface{}), } } func (eb *EventBuilder) WithData(key string, value interface{}) *EventBuilder { eb.data[key] = value return eb } func (eb *EventBuilder) WithMetadata(key string, value interface{}) *EventBuilder { eb.metadata[key] = value return eb } func (eb *EventBuilder) Build() core.Event { event := core.NewEvent(eb.eventType, eb.data) for k, v := range eb.metadata { event.Metadata[k] = v } return event } // Usage in tests func TestWithEventBuilder(t *testing.T) { event := NewEventBuilder(&#34;process&#34;). WithData(&#34;input&#34;, &#34;test data&#34;). WithData(&#34;priority&#34;, &#34;high&#34;). WithMetadata(&#34;user_id&#34;, &#34;123&#34;). Build() // Use event in test... }Agent Test Harness type AgentTestHarness struct { agent core.AgentHandler mockLLM *MockLLMProvider memory core.Memory ctx context.Context } func NewAgentTestHarness(agent core.AgentHandler) *AgentTestHarness { mockLLM := &amp;MockLLMProvider{} memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, _ := core.NewMemory(memoryConfig) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) return &amp;AgentTestHarness{ agent: agent, mockLLM: mockLLM, memory: memory, ctx: ctx, } } func (h *AgentTestHarness) SetLLMResponse(response string) { h.mockLLM.response = response } func (h *AgentTestHarness) SetLLMError(err error) { h.mockLLM.err = err } func (h *AgentTestHarness) Execute(event core.Event) (core.AgentResult, error) { return h.agent.Run(h.ctx, event, core.NewState()) } func (h *AgentTestHarness) Cleanup() { if h.memory != nil { h.memory.Close() } } // Usage in tests func TestWithHarness(t *testing.T) { harness := NewAgentTestHarness(NewMyAgent()) defer harness.Cleanup() harness.SetLLMResponse(&#34;Expected response&#34;) event := core.NewEvent(&#34;test&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test data&#34;, }) result, err := harness.Execute(event) require.NoError(t, err) assert.Equal(t, &#34;Expected response&#34;, result.Data[&#34;response&#34;]) }Continuous Integration GitHub Actions Test Configuration # .github/workflows/test.yml name: Test on: push: branches: [ main, develop ] pull_request: branches: [ main ] jobs: test: runs-on: ubuntu-latest services: postgres: image: pgvector/pgvector:pg15 env: POSTGRES_PASSWORD: password POSTGRES_DB: agentflow_test options: &gt;- --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5 ports: - 5432:5432 steps: - uses: actions/checkout@v3 - name: Set up Go uses: actions/setup-go@v3 with: go-version: 1.21 - name: Install dependencies run: go mod download - name: Run unit tests run: go test -v -short ./... - name: Run integration tests run: go test -v ./... env: TEST_DB_URL: postgres://postgres:password@localhost:5432/agentflow_test?sslmode=disable - name: Run performance tests run: go test -v -run TestPerformance ./... - name: Generate coverage report run: go test -coverprofile=coverage.out ./... - name: Upload coverage to Codecov uses: codecov/codecov-action@v3 with: file: ./coverage.outBest Practices Test Organization // Organize tests by functionality func TestAgentCore(t *testing.T) { t.Run(&#34;BasicExecution&#34;, testBasicExecution) t.Run(&#34;ErrorHandling&#34;, testErrorHandling) t.Run(&#34;StateManagement&#34;, testStateManagement) } func TestAgentIntegration(t *testing.T) { t.Run(&#34;WithMemory&#34;, testWithMemory) t.Run(&#34;WithTools&#34;, testWithTools) t.Run(&#34;WithOrchestration&#34;, testWithOrchestration) } func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance tests in short mode&#34;) } t.Run(&#34;LoadTest&#34;, testLoadTest) t.Run(&#34;MemoryUsage&#34;, testMemoryUsage) t.Run(&#34;Concurrency&#34;, testConcurrency) }Test Data Management // Use table-driven tests for multiple scenarios func TestDataProcessing(t *testing.T) { testCases := []struct { name string input interface{} expected interface{} wantErr bool }{ // Test cases here... } for _, tc := range testCases { t.Run(tc.name, func(t *testing.T) { // Test implementation... }) } } // Use test fixtures for complex data func loadTestFixture(t *testing.T, filename string) map[string]interface{} { data, err := os.ReadFile(filepath.Join(&#34;testdata&#34;, filename)) require.NoError(t, err) var result map[string]interface{} err = json.Unmarshal(data, &amp;result) require.NoError(t, err) return result }Next Steps Debugging - Debug agent interactions effectively Best Practices - Development best practices Production Deployment - Production deployment">
    <meta property="og:url" content="http://localhost:1313/AgenticGoKitDocs/guides/development/testing-agents/index.html">
    <meta property="og:site_name" content="AgenticGoKit Docs">
    <meta property="og:title" content="testing-agents :: AgenticGoKit Docs">
    <meta property="og:description" content="Testing Agents Comprehensive testing strategies for multi-agent systems
This guide covers testing approaches for AgenticGoKit applications, from unit testing individual agents to integration testing complex multi-agent workflows.
Testing Philosophy AgenticGoKit testing follows these principles:
Test at multiple levels: Unit, integration, and end-to-end Mock external dependencies: LLM providers, databases, external APIs Test orchestration patterns: Verify agent interactions work correctly Performance testing: Ensure agents meet performance requirements Deterministic testing: Use mocks to ensure reproducible results Quick Start (10 minutes) 1. Basic Agent Unit Test package main import ( &#34;context&#34; &#34;testing&#34; &#34;github.com/stretchr/testify/assert&#34; &#34;github.com/stretchr/testify/require&#34; &#34;github.com/kunalkushwaha/agenticgokit/core&#34; ) func TestGreetingAgent(t *testing.T) { // Create mock LLM provider mockLLM := &amp;MockLLMProvider{ response: &#34;Hello, World! Nice to meet you.&#34;, } // Create agent agent := NewGreetingAgent(&#34;greeter&#34;, mockLLM) // Create test event event := core.NewEvent(&#34;greeting&#34;, map[string]interface{}{ &#34;name&#34;: &#34;World&#34;, }) // Execute agent result, err := agent.Run(context.Background(), event, core.NewState()) // Verify results require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;Hello&#34;) assert.Contains(t, result.Data[&#34;response&#34;], &#34;World&#34;) } // Mock LLM Provider for testing type MockLLMProvider struct { response string err error } func (m *MockLLMProvider) Generate(ctx context.Context, prompt string) (string, error) { if m.err != nil { return &#34;&#34;, m.err } return m.response, nil } func (m *MockLLMProvider) Name() string { return &#34;mock&#34; }2. Multi-Agent Integration Test func TestMultiAgentWorkflow(t *testing.T) { // Create mock providers mockLLM := &amp;MockLLMProvider{ response: &#34;Processed successfully&#34;, } // Create agents agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: NewAnalyzerAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM), } // Create sequential runner runner := core.CreateSequentialRunner(agents, []string{&#34;analyzer&#34;, &#34;processor&#34;}, 30*time.Second) // Test workflow event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;data&#34;: &#34;test data&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Contains(t, results, &#34;analyzer&#34;) assert.Contains(t, results, &#34;processor&#34;) }Unit Testing Patterns Testing Agent Logic func TestDataProcessingAgent(t *testing.T) { tests := []struct { name string input map[string]interface{} expected map[string]interface{} wantErr bool }{ { name: &#34;valid data processing&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{1, 2, 3, 4, 5}, }, expected: map[string]interface{}{ &#34;sum&#34;: 15, &#34;average&#34;: 3.0, &#34;count&#34;: 5, }, wantErr: false, }, { name: &#34;empty data&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{}, }, expected: nil, wantErr: true, }, { name: &#34;invalid input type&#34;, input: map[string]interface{}{ &#34;numbers&#34;: &#34;not a slice&#34;, }, expected: nil, wantErr: true, }, } for _, tt := range tests { t.Run(tt.name, func(t *testing.T) { agent := NewDataProcessingAgent() event := core.NewEvent(&#34;process&#34;, tt.input) result, err := agent.Run(context.Background(), event, core.NewState()) if tt.wantErr { assert.Error(t, err) return } require.NoError(t, err) for key, expectedValue := range tt.expected { assert.Equal(t, expectedValue, result.Data[key]) } }) } }Testing State Management func TestAgentStateHandling(t *testing.T) { agent := NewStatefulAgent() // Test state initialization initialState := core.NewState() initialState.Set(&#34;counter&#34;, 0) event := core.NewEvent(&#34;increment&#34;, nil) // First execution result1, err := agent.Run(context.Background(), event, initialState) require.NoError(t, err) assert.Equal(t, 1, result1.Data[&#34;counter&#34;]) // Second execution with updated state result2, err := agent.Run(context.Background(), event, result1.State) require.NoError(t, err) assert.Equal(t, 2, result2.Data[&#34;counter&#34;]) // Verify state persistence assert.Equal(t, 2, result2.State.Get(&#34;counter&#34;)) }Testing Error Handling func TestAgentErrorHandling(t *testing.T) { // Test with failing LLM provider failingLLM := &amp;MockLLMProvider{ err: errors.New(&#34;LLM service unavailable&#34;), } agent := NewResilientAgent(failingLLM) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) // Agent should handle LLM failure gracefully require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;service temporarily unavailable&#34;) assert.True(t, result.Data[&#34;fallback_used&#34;].(bool)) }Integration Testing Testing Orchestration Patterns func TestSequentialOrchestration(t *testing.T) { // Create agents that depend on each other agents := map[string]core.AgentHandler{ &#34;step1&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { input := event.Data[&#34;input&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;step1_output&#34;: input &#43; &#34;_processed&#34;, }, }, nil }), &#34;step2&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { step1Output := state.Data[&#34;step1_output&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;final_output&#34;: step1Output &#43; &#34;_finalized&#34;, }, }, nil }), } runner := core.CreateSequentialRunner(agents, []string{&#34;step1&#34;, &#34;step2&#34;}, 30*time.Second) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Equal(t, &#34;test_processed_finalized&#34;, results[&#34;step2&#34;].Data[&#34;final_output&#34;]) } func TestCollaborativeOrchestration(t *testing.T) { // Create agents that work in parallel agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;analysis&#34;: &#34;positive sentiment&#34;, }, }, nil }), &#34;summarizer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;summary&#34;: &#34;brief summary&#34;, }, }, nil }), } runner := core.CreateCollaborativeRunner(agents, 30*time.Second) event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;text&#34;: &#34;This is great!&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Equal(t, &#34;positive sentiment&#34;, results[&#34;analyzer&#34;].Data[&#34;analysis&#34;]) assert.Equal(t, &#34;brief summary&#34;, results[&#34;summarizer&#34;].Data[&#34;summary&#34;]) }Testing Memory Integration func TestAgentWithMemory(t *testing.T) { // Create in-memory provider for testing memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() // Create memory-enabled agent agent := NewMemoryEnabledAgent(memory) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) // First interaction - store information event1 := core.NewEvent(&#34;remember&#34;, map[string]interface{}{ &#34;info&#34;: &#34;User likes coffee&#34;, }) result1, err := agent.Run(ctx, event1, core.NewState()) require.NoError(t, err) assert.Contains(t, result1.Data[&#34;response&#34;], &#34;remembered&#34;) // Second interaction - recall information event2 := core.NewEvent(&#34;recall&#34;, map[string]interface{}{ &#34;query&#34;: &#34;What does the user like?&#34;, }) result2, err := agent.Run(ctx, event2, core.NewState()) require.NoError(t, err) assert.Contains(t, result2.Data[&#34;response&#34;], &#34;coffee&#34;) }Testing MCP Tool Integration func TestAgentWithMCPTools(t *testing.T) { // Create mock MCP manager mockMCP := &amp;MockMCPManager{ tools: []core.ToolSchema{ { Name: &#34;search&#34;, Description: &#34;Search for information&#34;, }, }, responses: map[string]interface{}{ &#34;search&#34;: map[string]interface{}{ &#34;results&#34;: []string{&#34;Mock search result&#34;}, }, }, } mockLLM := &amp;MockLLMProvider{ response: `I&#39;ll search for that information. &lt;tool_call&gt; {&#34;name&#34;: &#34;search&#34;, &#34;args&#34;: {&#34;query&#34;: &#34;test query&#34;}} &lt;/tool_call&gt; Based on the search results, here&#39;s what I found...`, } agent := NewToolEnabledAgent(mockLLM, mockMCP) event := core.NewEvent(&#34;query&#34;, map[string]interface{}{ &#34;question&#34;: &#34;Search for test information&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) assert.True(t, result.Data[&#34;tools_used&#34;].(bool)) assert.Contains(t, result.Data[&#34;tool_results&#34;], &#34;Mock search result&#34;) } type MockMCPManager struct { tools []core.ToolSchema responses map[string]interface{} } func (m *MockMCPManager) ListTools(ctx context.Context) ([]core.ToolSchema, error) { return m.tools, nil } func (m *MockMCPManager) CallTool(ctx context.Context, name string, args map[string]interface{}) (interface{}, error) { if response, exists := m.responses[name]; exists { return response, nil } return nil, fmt.Errorf(&#34;tool not found: %s&#34;, name) }Performance Testing Load Testing func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance test in short mode&#34;) } agent := NewPerformantAgent() // Test concurrent execution concurrency := 10 iterations := 100 var wg sync.WaitGroup results := make(chan time.Duration, concurrency*iterations) for i := 0; i &lt; concurrency; i&#43;&#43; { wg.Add(1) go func() { defer wg.Done() for j := 0; j &lt; iterations; j&#43;&#43; { start := time.Now() event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: fmt.Sprintf(&#34;test_%d_%d&#34;, i, j), }) _, err := agent.Run(context.Background(), event, core.NewState()) duration := time.Since(start) require.NoError(t, err) results &lt;- duration } }() } wg.Wait() close(results) // Analyze performance var total time.Duration var max time.Duration count := 0 for duration := range results { total &#43;= duration if duration &gt; max { max = duration } count&#43;&#43; } average := total / time.Duration(count) t.Logf(&#34;Performance Results:&#34;) t.Logf(&#34; Total requests: %d&#34;, count) t.Logf(&#34; Average duration: %v&#34;, average) t.Logf(&#34; Max duration: %v&#34;, max) t.Logf(&#34; Requests per second: %.2f&#34;, float64(count)/total.Seconds()) // Assert performance requirements assert.Less(t, average, 100*time.Millisecond, &#34;Average response time should be under 100ms&#34;) assert.Less(t, max, 500*time.Millisecond, &#34;Max response time should be under 500ms&#34;) }Memory Usage Testing func TestAgentMemoryUsage(t *testing.T) { agent := NewMemoryEfficientAgent() // Measure initial memory var m1 runtime.MemStats runtime.GC() runtime.ReadMemStats(&amp;m1) // Run many iterations for i := 0; i &lt; 1000; i&#43;&#43; { event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: strings.Repeat(&#34;x&#34;, 1000), // 1KB of data }) _, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) } // Force garbage collection and measure final memory runtime.GC() var m2 runtime.MemStats runtime.ReadMemStats(&amp;m2) // Calculate memory increase memoryIncrease := m2.Alloc - m1.Alloc t.Logf(&#34;Memory usage:&#34;) t.Logf(&#34; Initial: %d KB&#34;, m1.Alloc/1024) t.Logf(&#34; Final: %d KB&#34;, m2.Alloc/1024) t.Logf(&#34; Increase: %d KB&#34;, memoryIncrease/1024) // Assert reasonable memory usage (adjust threshold as needed) assert.Less(t, memoryIncrease, uint64(10*1024*1024), &#34;Memory increase should be less than 10MB&#34;) }End-to-End Testing Complete Workflow Testing func TestCompleteWorkflow(t *testing.T) { // Set up complete system memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() mockLLM := &amp;MockLLMProvider{ response: &#34;I understand your request and will process it accordingly.&#34;, } // Create complete agent system agents := map[string]core.AgentHandler{ &#34;intake&#34;: NewIntakeAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM, memory), &#34;responder&#34;: NewResponderAgent(mockLLM), } runner := core.CreateSequentialRunner(agents, []string{&#34;intake&#34;, &#34;processor&#34;, &#34;responder&#34;}, 60*time.Second) // Test complete user interaction ctx := memory.SetSession(context.Background(), &#34;e2e-test-session&#34;) event := core.NewEvent(&#34;user_request&#34;, map[string]interface{}{ &#34;message&#34;: &#34;I need help with my project&#34;, &#34;user_id&#34;: &#34;test_user&#34;, }) results, err := runner.ProcessEvent(ctx, event) require.NoError(t, err) assert.Len(t, results, 3) // Verify each stage completed successfully assert.Contains(t, results[&#34;intake&#34;].Data, &#34;processed&#34;) assert.Contains(t, results[&#34;processor&#34;].Data, &#34;analyzed&#34;) assert.Contains(t, results[&#34;responder&#34;].Data, &#34;response&#34;) // Verify final response quality finalResponse := results[&#34;responder&#34;].Data[&#34;response&#34;].(string) assert.NotEmpty(t, finalResponse) assert.Greater(t, len(finalResponse), 10) }Test Utilities and Helpers Test Data Builders // Event builder for consistent test data type EventBuilder struct { eventType string data map[string]interface{} metadata map[string]interface{} } func NewEventBuilder(eventType string) *EventBuilder { return &amp;EventBuilder{ eventType: eventType, data: make(map[string]interface{}), metadata: make(map[string]interface{}), } } func (eb *EventBuilder) WithData(key string, value interface{}) *EventBuilder { eb.data[key] = value return eb } func (eb *EventBuilder) WithMetadata(key string, value interface{}) *EventBuilder { eb.metadata[key] = value return eb } func (eb *EventBuilder) Build() core.Event { event := core.NewEvent(eb.eventType, eb.data) for k, v := range eb.metadata { event.Metadata[k] = v } return event } // Usage in tests func TestWithEventBuilder(t *testing.T) { event := NewEventBuilder(&#34;process&#34;). WithData(&#34;input&#34;, &#34;test data&#34;). WithData(&#34;priority&#34;, &#34;high&#34;). WithMetadata(&#34;user_id&#34;, &#34;123&#34;). Build() // Use event in test... }Agent Test Harness type AgentTestHarness struct { agent core.AgentHandler mockLLM *MockLLMProvider memory core.Memory ctx context.Context } func NewAgentTestHarness(agent core.AgentHandler) *AgentTestHarness { mockLLM := &amp;MockLLMProvider{} memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, _ := core.NewMemory(memoryConfig) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) return &amp;AgentTestHarness{ agent: agent, mockLLM: mockLLM, memory: memory, ctx: ctx, } } func (h *AgentTestHarness) SetLLMResponse(response string) { h.mockLLM.response = response } func (h *AgentTestHarness) SetLLMError(err error) { h.mockLLM.err = err } func (h *AgentTestHarness) Execute(event core.Event) (core.AgentResult, error) { return h.agent.Run(h.ctx, event, core.NewState()) } func (h *AgentTestHarness) Cleanup() { if h.memory != nil { h.memory.Close() } } // Usage in tests func TestWithHarness(t *testing.T) { harness := NewAgentTestHarness(NewMyAgent()) defer harness.Cleanup() harness.SetLLMResponse(&#34;Expected response&#34;) event := core.NewEvent(&#34;test&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test data&#34;, }) result, err := harness.Execute(event) require.NoError(t, err) assert.Equal(t, &#34;Expected response&#34;, result.Data[&#34;response&#34;]) }Continuous Integration GitHub Actions Test Configuration # .github/workflows/test.yml name: Test on: push: branches: [ main, develop ] pull_request: branches: [ main ] jobs: test: runs-on: ubuntu-latest services: postgres: image: pgvector/pgvector:pg15 env: POSTGRES_PASSWORD: password POSTGRES_DB: agentflow_test options: &gt;- --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5 ports: - 5432:5432 steps: - uses: actions/checkout@v3 - name: Set up Go uses: actions/setup-go@v3 with: go-version: 1.21 - name: Install dependencies run: go mod download - name: Run unit tests run: go test -v -short ./... - name: Run integration tests run: go test -v ./... env: TEST_DB_URL: postgres://postgres:password@localhost:5432/agentflow_test?sslmode=disable - name: Run performance tests run: go test -v -run TestPerformance ./... - name: Generate coverage report run: go test -coverprofile=coverage.out ./... - name: Upload coverage to Codecov uses: codecov/codecov-action@v3 with: file: ./coverage.outBest Practices Test Organization // Organize tests by functionality func TestAgentCore(t *testing.T) { t.Run(&#34;BasicExecution&#34;, testBasicExecution) t.Run(&#34;ErrorHandling&#34;, testErrorHandling) t.Run(&#34;StateManagement&#34;, testStateManagement) } func TestAgentIntegration(t *testing.T) { t.Run(&#34;WithMemory&#34;, testWithMemory) t.Run(&#34;WithTools&#34;, testWithTools) t.Run(&#34;WithOrchestration&#34;, testWithOrchestration) } func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance tests in short mode&#34;) } t.Run(&#34;LoadTest&#34;, testLoadTest) t.Run(&#34;MemoryUsage&#34;, testMemoryUsage) t.Run(&#34;Concurrency&#34;, testConcurrency) }Test Data Management // Use table-driven tests for multiple scenarios func TestDataProcessing(t *testing.T) { testCases := []struct { name string input interface{} expected interface{} wantErr bool }{ // Test cases here... } for _, tc := range testCases { t.Run(tc.name, func(t *testing.T) { // Test implementation... }) } } // Use test fixtures for complex data func loadTestFixture(t *testing.T, filename string) map[string]interface{} { data, err := os.ReadFile(filepath.Join(&#34;testdata&#34;, filename)) require.NoError(t, err) var result map[string]interface{} err = json.Unmarshal(data, &amp;result) require.NoError(t, err) return result }Next Steps Debugging - Debug agent interactions effectively Best Practices - Development best practices Production Deployment - Production deployment">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="guides">
    <meta property="article:published_time" content="2025-07-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="name" content="testing-agents :: AgenticGoKit Docs">
    <meta itemprop="description" content="Testing Agents Comprehensive testing strategies for multi-agent systems
This guide covers testing approaches for AgenticGoKit applications, from unit testing individual agents to integration testing complex multi-agent workflows.
Testing Philosophy AgenticGoKit testing follows these principles:
Test at multiple levels: Unit, integration, and end-to-end Mock external dependencies: LLM providers, databases, external APIs Test orchestration patterns: Verify agent interactions work correctly Performance testing: Ensure agents meet performance requirements Deterministic testing: Use mocks to ensure reproducible results Quick Start (10 minutes) 1. Basic Agent Unit Test package main import ( &#34;context&#34; &#34;testing&#34; &#34;github.com/stretchr/testify/assert&#34; &#34;github.com/stretchr/testify/require&#34; &#34;github.com/kunalkushwaha/agenticgokit/core&#34; ) func TestGreetingAgent(t *testing.T) { // Create mock LLM provider mockLLM := &amp;MockLLMProvider{ response: &#34;Hello, World! Nice to meet you.&#34;, } // Create agent agent := NewGreetingAgent(&#34;greeter&#34;, mockLLM) // Create test event event := core.NewEvent(&#34;greeting&#34;, map[string]interface{}{ &#34;name&#34;: &#34;World&#34;, }) // Execute agent result, err := agent.Run(context.Background(), event, core.NewState()) // Verify results require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;Hello&#34;) assert.Contains(t, result.Data[&#34;response&#34;], &#34;World&#34;) } // Mock LLM Provider for testing type MockLLMProvider struct { response string err error } func (m *MockLLMProvider) Generate(ctx context.Context, prompt string) (string, error) { if m.err != nil { return &#34;&#34;, m.err } return m.response, nil } func (m *MockLLMProvider) Name() string { return &#34;mock&#34; }2. Multi-Agent Integration Test func TestMultiAgentWorkflow(t *testing.T) { // Create mock providers mockLLM := &amp;MockLLMProvider{ response: &#34;Processed successfully&#34;, } // Create agents agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: NewAnalyzerAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM), } // Create sequential runner runner := core.CreateSequentialRunner(agents, []string{&#34;analyzer&#34;, &#34;processor&#34;}, 30*time.Second) // Test workflow event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;data&#34;: &#34;test data&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Contains(t, results, &#34;analyzer&#34;) assert.Contains(t, results, &#34;processor&#34;) }Unit Testing Patterns Testing Agent Logic func TestDataProcessingAgent(t *testing.T) { tests := []struct { name string input map[string]interface{} expected map[string]interface{} wantErr bool }{ { name: &#34;valid data processing&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{1, 2, 3, 4, 5}, }, expected: map[string]interface{}{ &#34;sum&#34;: 15, &#34;average&#34;: 3.0, &#34;count&#34;: 5, }, wantErr: false, }, { name: &#34;empty data&#34;, input: map[string]interface{}{ &#34;numbers&#34;: []int{}, }, expected: nil, wantErr: true, }, { name: &#34;invalid input type&#34;, input: map[string]interface{}{ &#34;numbers&#34;: &#34;not a slice&#34;, }, expected: nil, wantErr: true, }, } for _, tt := range tests { t.Run(tt.name, func(t *testing.T) { agent := NewDataProcessingAgent() event := core.NewEvent(&#34;process&#34;, tt.input) result, err := agent.Run(context.Background(), event, core.NewState()) if tt.wantErr { assert.Error(t, err) return } require.NoError(t, err) for key, expectedValue := range tt.expected { assert.Equal(t, expectedValue, result.Data[key]) } }) } }Testing State Management func TestAgentStateHandling(t *testing.T) { agent := NewStatefulAgent() // Test state initialization initialState := core.NewState() initialState.Set(&#34;counter&#34;, 0) event := core.NewEvent(&#34;increment&#34;, nil) // First execution result1, err := agent.Run(context.Background(), event, initialState) require.NoError(t, err) assert.Equal(t, 1, result1.Data[&#34;counter&#34;]) // Second execution with updated state result2, err := agent.Run(context.Background(), event, result1.State) require.NoError(t, err) assert.Equal(t, 2, result2.Data[&#34;counter&#34;]) // Verify state persistence assert.Equal(t, 2, result2.State.Get(&#34;counter&#34;)) }Testing Error Handling func TestAgentErrorHandling(t *testing.T) { // Test with failing LLM provider failingLLM := &amp;MockLLMProvider{ err: errors.New(&#34;LLM service unavailable&#34;), } agent := NewResilientAgent(failingLLM) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) // Agent should handle LLM failure gracefully require.NoError(t, err) assert.Contains(t, result.Data[&#34;response&#34;], &#34;service temporarily unavailable&#34;) assert.True(t, result.Data[&#34;fallback_used&#34;].(bool)) }Integration Testing Testing Orchestration Patterns func TestSequentialOrchestration(t *testing.T) { // Create agents that depend on each other agents := map[string]core.AgentHandler{ &#34;step1&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { input := event.Data[&#34;input&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;step1_output&#34;: input &#43; &#34;_processed&#34;, }, }, nil }), &#34;step2&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { step1Output := state.Data[&#34;step1_output&#34;].(string) return core.AgentResult{ Data: map[string]interface{}{ &#34;final_output&#34;: step1Output &#43; &#34;_finalized&#34;, }, }, nil }), } runner := core.CreateSequentialRunner(agents, []string{&#34;step1&#34;, &#34;step2&#34;}, 30*time.Second) event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Equal(t, &#34;test_processed_finalized&#34;, results[&#34;step2&#34;].Data[&#34;final_output&#34;]) } func TestCollaborativeOrchestration(t *testing.T) { // Create agents that work in parallel agents := map[string]core.AgentHandler{ &#34;analyzer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;analysis&#34;: &#34;positive sentiment&#34;, }, }, nil }), &#34;summarizer&#34;: core.AgentHandlerFunc(func(ctx context.Context, event core.Event, state core.State) (core.AgentResult, error) { return core.AgentResult{ Data: map[string]interface{}{ &#34;summary&#34;: &#34;brief summary&#34;, }, }, nil }), } runner := core.CreateCollaborativeRunner(agents, 30*time.Second) event := core.NewEvent(&#34;analyze&#34;, map[string]interface{}{ &#34;text&#34;: &#34;This is great!&#34;, }) results, err := runner.ProcessEvent(context.Background(), event) require.NoError(t, err) assert.Len(t, results, 2) assert.Equal(t, &#34;positive sentiment&#34;, results[&#34;analyzer&#34;].Data[&#34;analysis&#34;]) assert.Equal(t, &#34;brief summary&#34;, results[&#34;summarizer&#34;].Data[&#34;summary&#34;]) }Testing Memory Integration func TestAgentWithMemory(t *testing.T) { // Create in-memory provider for testing memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() // Create memory-enabled agent agent := NewMemoryEnabledAgent(memory) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) // First interaction - store information event1 := core.NewEvent(&#34;remember&#34;, map[string]interface{}{ &#34;info&#34;: &#34;User likes coffee&#34;, }) result1, err := agent.Run(ctx, event1, core.NewState()) require.NoError(t, err) assert.Contains(t, result1.Data[&#34;response&#34;], &#34;remembered&#34;) // Second interaction - recall information event2 := core.NewEvent(&#34;recall&#34;, map[string]interface{}{ &#34;query&#34;: &#34;What does the user like?&#34;, }) result2, err := agent.Run(ctx, event2, core.NewState()) require.NoError(t, err) assert.Contains(t, result2.Data[&#34;response&#34;], &#34;coffee&#34;) }Testing MCP Tool Integration func TestAgentWithMCPTools(t *testing.T) { // Create mock MCP manager mockMCP := &amp;MockMCPManager{ tools: []core.ToolSchema{ { Name: &#34;search&#34;, Description: &#34;Search for information&#34;, }, }, responses: map[string]interface{}{ &#34;search&#34;: map[string]interface{}{ &#34;results&#34;: []string{&#34;Mock search result&#34;}, }, }, } mockLLM := &amp;MockLLMProvider{ response: `I&#39;ll search for that information. &lt;tool_call&gt; {&#34;name&#34;: &#34;search&#34;, &#34;args&#34;: {&#34;query&#34;: &#34;test query&#34;}} &lt;/tool_call&gt; Based on the search results, here&#39;s what I found...`, } agent := NewToolEnabledAgent(mockLLM, mockMCP) event := core.NewEvent(&#34;query&#34;, map[string]interface{}{ &#34;question&#34;: &#34;Search for test information&#34;, }) result, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) assert.True(t, result.Data[&#34;tools_used&#34;].(bool)) assert.Contains(t, result.Data[&#34;tool_results&#34;], &#34;Mock search result&#34;) } type MockMCPManager struct { tools []core.ToolSchema responses map[string]interface{} } func (m *MockMCPManager) ListTools(ctx context.Context) ([]core.ToolSchema, error) { return m.tools, nil } func (m *MockMCPManager) CallTool(ctx context.Context, name string, args map[string]interface{}) (interface{}, error) { if response, exists := m.responses[name]; exists { return response, nil } return nil, fmt.Errorf(&#34;tool not found: %s&#34;, name) }Performance Testing Load Testing func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance test in short mode&#34;) } agent := NewPerformantAgent() // Test concurrent execution concurrency := 10 iterations := 100 var wg sync.WaitGroup results := make(chan time.Duration, concurrency*iterations) for i := 0; i &lt; concurrency; i&#43;&#43; { wg.Add(1) go func() { defer wg.Done() for j := 0; j &lt; iterations; j&#43;&#43; { start := time.Now() event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: fmt.Sprintf(&#34;test_%d_%d&#34;, i, j), }) _, err := agent.Run(context.Background(), event, core.NewState()) duration := time.Since(start) require.NoError(t, err) results &lt;- duration } }() } wg.Wait() close(results) // Analyze performance var total time.Duration var max time.Duration count := 0 for duration := range results { total &#43;= duration if duration &gt; max { max = duration } count&#43;&#43; } average := total / time.Duration(count) t.Logf(&#34;Performance Results:&#34;) t.Logf(&#34; Total requests: %d&#34;, count) t.Logf(&#34; Average duration: %v&#34;, average) t.Logf(&#34; Max duration: %v&#34;, max) t.Logf(&#34; Requests per second: %.2f&#34;, float64(count)/total.Seconds()) // Assert performance requirements assert.Less(t, average, 100*time.Millisecond, &#34;Average response time should be under 100ms&#34;) assert.Less(t, max, 500*time.Millisecond, &#34;Max response time should be under 500ms&#34;) }Memory Usage Testing func TestAgentMemoryUsage(t *testing.T) { agent := NewMemoryEfficientAgent() // Measure initial memory var m1 runtime.MemStats runtime.GC() runtime.ReadMemStats(&amp;m1) // Run many iterations for i := 0; i &lt; 1000; i&#43;&#43; { event := core.NewEvent(&#34;process&#34;, map[string]interface{}{ &#34;data&#34;: strings.Repeat(&#34;x&#34;, 1000), // 1KB of data }) _, err := agent.Run(context.Background(), event, core.NewState()) require.NoError(t, err) } // Force garbage collection and measure final memory runtime.GC() var m2 runtime.MemStats runtime.ReadMemStats(&amp;m2) // Calculate memory increase memoryIncrease := m2.Alloc - m1.Alloc t.Logf(&#34;Memory usage:&#34;) t.Logf(&#34; Initial: %d KB&#34;, m1.Alloc/1024) t.Logf(&#34; Final: %d KB&#34;, m2.Alloc/1024) t.Logf(&#34; Increase: %d KB&#34;, memoryIncrease/1024) // Assert reasonable memory usage (adjust threshold as needed) assert.Less(t, memoryIncrease, uint64(10*1024*1024), &#34;Memory increase should be less than 10MB&#34;) }End-to-End Testing Complete Workflow Testing func TestCompleteWorkflow(t *testing.T) { // Set up complete system memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, err := core.NewMemory(memoryConfig) require.NoError(t, err) defer memory.Close() mockLLM := &amp;MockLLMProvider{ response: &#34;I understand your request and will process it accordingly.&#34;, } // Create complete agent system agents := map[string]core.AgentHandler{ &#34;intake&#34;: NewIntakeAgent(mockLLM), &#34;processor&#34;: NewProcessorAgent(mockLLM, memory), &#34;responder&#34;: NewResponderAgent(mockLLM), } runner := core.CreateSequentialRunner(agents, []string{&#34;intake&#34;, &#34;processor&#34;, &#34;responder&#34;}, 60*time.Second) // Test complete user interaction ctx := memory.SetSession(context.Background(), &#34;e2e-test-session&#34;) event := core.NewEvent(&#34;user_request&#34;, map[string]interface{}{ &#34;message&#34;: &#34;I need help with my project&#34;, &#34;user_id&#34;: &#34;test_user&#34;, }) results, err := runner.ProcessEvent(ctx, event) require.NoError(t, err) assert.Len(t, results, 3) // Verify each stage completed successfully assert.Contains(t, results[&#34;intake&#34;].Data, &#34;processed&#34;) assert.Contains(t, results[&#34;processor&#34;].Data, &#34;analyzed&#34;) assert.Contains(t, results[&#34;responder&#34;].Data, &#34;response&#34;) // Verify final response quality finalResponse := results[&#34;responder&#34;].Data[&#34;response&#34;].(string) assert.NotEmpty(t, finalResponse) assert.Greater(t, len(finalResponse), 10) }Test Utilities and Helpers Test Data Builders // Event builder for consistent test data type EventBuilder struct { eventType string data map[string]interface{} metadata map[string]interface{} } func NewEventBuilder(eventType string) *EventBuilder { return &amp;EventBuilder{ eventType: eventType, data: make(map[string]interface{}), metadata: make(map[string]interface{}), } } func (eb *EventBuilder) WithData(key string, value interface{}) *EventBuilder { eb.data[key] = value return eb } func (eb *EventBuilder) WithMetadata(key string, value interface{}) *EventBuilder { eb.metadata[key] = value return eb } func (eb *EventBuilder) Build() core.Event { event := core.NewEvent(eb.eventType, eb.data) for k, v := range eb.metadata { event.Metadata[k] = v } return event } // Usage in tests func TestWithEventBuilder(t *testing.T) { event := NewEventBuilder(&#34;process&#34;). WithData(&#34;input&#34;, &#34;test data&#34;). WithData(&#34;priority&#34;, &#34;high&#34;). WithMetadata(&#34;user_id&#34;, &#34;123&#34;). Build() // Use event in test... }Agent Test Harness type AgentTestHarness struct { agent core.AgentHandler mockLLM *MockLLMProvider memory core.Memory ctx context.Context } func NewAgentTestHarness(agent core.AgentHandler) *AgentTestHarness { mockLLM := &amp;MockLLMProvider{} memoryConfig := core.AgentMemoryConfig{ Provider: &#34;memory&#34;, Connection: &#34;memory&#34;, Dimensions: 384, Embedding: core.EmbeddingConfig{ Provider: &#34;dummy&#34;, }, } memory, _ := core.NewMemory(memoryConfig) ctx := memory.SetSession(context.Background(), &#34;test-session&#34;) return &amp;AgentTestHarness{ agent: agent, mockLLM: mockLLM, memory: memory, ctx: ctx, } } func (h *AgentTestHarness) SetLLMResponse(response string) { h.mockLLM.response = response } func (h *AgentTestHarness) SetLLMError(err error) { h.mockLLM.err = err } func (h *AgentTestHarness) Execute(event core.Event) (core.AgentResult, error) { return h.agent.Run(h.ctx, event, core.NewState()) } func (h *AgentTestHarness) Cleanup() { if h.memory != nil { h.memory.Close() } } // Usage in tests func TestWithHarness(t *testing.T) { harness := NewAgentTestHarness(NewMyAgent()) defer harness.Cleanup() harness.SetLLMResponse(&#34;Expected response&#34;) event := core.NewEvent(&#34;test&#34;, map[string]interface{}{ &#34;input&#34;: &#34;test data&#34;, }) result, err := harness.Execute(event) require.NoError(t, err) assert.Equal(t, &#34;Expected response&#34;, result.Data[&#34;response&#34;]) }Continuous Integration GitHub Actions Test Configuration # .github/workflows/test.yml name: Test on: push: branches: [ main, develop ] pull_request: branches: [ main ] jobs: test: runs-on: ubuntu-latest services: postgres: image: pgvector/pgvector:pg15 env: POSTGRES_PASSWORD: password POSTGRES_DB: agentflow_test options: &gt;- --health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5 ports: - 5432:5432 steps: - uses: actions/checkout@v3 - name: Set up Go uses: actions/setup-go@v3 with: go-version: 1.21 - name: Install dependencies run: go mod download - name: Run unit tests run: go test -v -short ./... - name: Run integration tests run: go test -v ./... env: TEST_DB_URL: postgres://postgres:password@localhost:5432/agentflow_test?sslmode=disable - name: Run performance tests run: go test -v -run TestPerformance ./... - name: Generate coverage report run: go test -coverprofile=coverage.out ./... - name: Upload coverage to Codecov uses: codecov/codecov-action@v3 with: file: ./coverage.outBest Practices Test Organization // Organize tests by functionality func TestAgentCore(t *testing.T) { t.Run(&#34;BasicExecution&#34;, testBasicExecution) t.Run(&#34;ErrorHandling&#34;, testErrorHandling) t.Run(&#34;StateManagement&#34;, testStateManagement) } func TestAgentIntegration(t *testing.T) { t.Run(&#34;WithMemory&#34;, testWithMemory) t.Run(&#34;WithTools&#34;, testWithTools) t.Run(&#34;WithOrchestration&#34;, testWithOrchestration) } func TestAgentPerformance(t *testing.T) { if testing.Short() { t.Skip(&#34;Skipping performance tests in short mode&#34;) } t.Run(&#34;LoadTest&#34;, testLoadTest) t.Run(&#34;MemoryUsage&#34;, testMemoryUsage) t.Run(&#34;Concurrency&#34;, testConcurrency) }Test Data Management // Use table-driven tests for multiple scenarios func TestDataProcessing(t *testing.T) { testCases := []struct { name string input interface{} expected interface{} wantErr bool }{ // Test cases here... } for _, tc := range testCases { t.Run(tc.name, func(t *testing.T) { // Test implementation... }) } } // Use test fixtures for complex data func loadTestFixture(t *testing.T, filename string) map[string]interface{} { data, err := os.ReadFile(filepath.Join(&#34;testdata&#34;, filename)) require.NoError(t, err) var result map[string]interface{} err = json.Unmarshal(data, &amp;result) require.NoError(t, err) return result }Next Steps Debugging - Debug agent interactions effectively Best Practices - Development best practices Production Deployment - Production deployment">
    <meta itemprop="datePublished" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="dateModified" content="2025-07-25T00:00:00+00:00">
    <meta itemprop="wordCount" content="1908">
    <title>testing-agents :: AgenticGoKit Docs</title>
    <link href="/AgenticGoKitDocs/css/auto-complete/auto-complete.min.css?1753430931" rel="stylesheet">
    <script src="/AgenticGoKitDocs/js/auto-complete/auto-complete.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/search-lunr.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/search.js?1753430931" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/AgenticGoKitDocs/searchindex.en.js?1753430931";
    </script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.stemmer.support.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.multi.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/lunr/lunr.en.min.js?1753430931" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/AgenticGoKitDocs/fonts/fontawesome/css/fontawesome-all.min.css?1753430931" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/AgenticGoKitDocs/fonts/fontawesome/css/fontawesome-all.min.css?1753430931" rel="stylesheet"></noscript>
    <link href="/AgenticGoKitDocs/css/perfect-scrollbar/perfect-scrollbar.min.css?1753430931" rel="stylesheet">
    <link href="/AgenticGoKitDocs/css/theme.css?1753430931" rel="stylesheet">
    <link href="/AgenticGoKitDocs/css/format-html.css?1753430931" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/guides\/development\/testing-agents\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313\/AgenticGoKitDocs';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'blue' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/AgenticGoKitDocs/guides/development/testing-agents/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#testing-philosophy">Testing Philosophy</a></li>
    <li><a href="#quick-start-10-minutes">Quick Start (10 minutes)</a>
      <ul>
        <li><a href="#1-basic-agent-unit-test">1. Basic Agent Unit Test</a></li>
        <li><a href="#2-multi-agent-integration-test">2. Multi-Agent Integration Test</a></li>
      </ul>
    </li>
    <li><a href="#unit-testing-patterns">Unit Testing Patterns</a>
      <ul>
        <li><a href="#testing-agent-logic">Testing Agent Logic</a></li>
        <li><a href="#testing-state-management">Testing State Management</a></li>
        <li><a href="#testing-error-handling">Testing Error Handling</a></li>
      </ul>
    </li>
    <li><a href="#integration-testing">Integration Testing</a>
      <ul>
        <li><a href="#testing-orchestration-patterns">Testing Orchestration Patterns</a></li>
        <li><a href="#testing-memory-integration">Testing Memory Integration</a></li>
        <li><a href="#testing-mcp-tool-integration">Testing MCP Tool Integration</a></li>
      </ul>
    </li>
    <li><a href="#performance-testing">Performance Testing</a>
      <ul>
        <li><a href="#load-testing">Load Testing</a></li>
        <li><a href="#memory-usage-testing">Memory Usage Testing</a></li>
      </ul>
    </li>
    <li><a href="#end-to-end-testing">End-to-End Testing</a>
      <ul>
        <li><a href="#complete-workflow-testing">Complete Workflow Testing</a></li>
      </ul>
    </li>
    <li><a href="#test-utilities-and-helpers">Test Utilities and Helpers</a>
      <ul>
        <li><a href="#test-data-builders">Test Data Builders</a></li>
        <li><a href="#agent-test-harness">Agent Test Harness</a></li>
      </ul>
    </li>
    <li><a href="#continuous-integration">Continuous Integration</a>
      <ul>
        <li><a href="#github-actions-test-configuration">GitHub Actions Test Configuration</a></li>
      </ul>
    </li>
    <li><a href="#best-practices">Best Practices</a>
      <ul>
        <li><a href="#test-organization">Test Organization</a></li>
        <li><a href="#test-data-management">Test Data Management</a></li>
      </ul>
    </li>
    <li><a href="#next-steps">Next Steps</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/index.html"><span itemprop="name">content</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/guides/index.html"><span itemprop="name">guides</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AgenticGoKitDocs/guides/development/index.html"><span itemprop="name">development</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">testing-agents</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/AgenticGoKitDocs/guides/development/research-assistant/index.html" title="research-assistant ()"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/AgenticGoKitDocs/guides/development/visualization/index.html" title="visualization ()"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable guides" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="testing-agents">testing-agents</h1>

<h1 id="testing-agents">Testing Agents</h1>
<p><strong>Comprehensive testing strategies for multi-agent systems</strong></p>
<p>This guide covers testing approaches for AgenticGoKit applications, from unit testing individual agents to integration testing complex multi-agent workflows.</p>
<h2 id="testing-philosophy">Testing Philosophy</h2>
<p>AgenticGoKit testing follows these principles:</p>
<ul>
<li><strong>Test at multiple levels</strong>: Unit, integration, and end-to-end</li>
<li><strong>Mock external dependencies</strong>: LLM providers, databases, external APIs</li>
<li><strong>Test orchestration patterns</strong>: Verify agent interactions work correctly</li>
<li><strong>Performance testing</strong>: Ensure agents meet performance requirements</li>
<li><strong>Deterministic testing</strong>: Use mocks to ensure reproducible results</li>
</ul>
<h2 id="quick-start-10-minutes">Quick Start (10 minutes)</h2>
<h3 id="1-basic-agent-unit-test">1. Basic Agent Unit Test</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/stretchr/testify/assert&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/stretchr/testify/require&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/kunalkushwaha/agenticgokit/core&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestGreetingAgent</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create mock LLM provider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">response</span>: <span style="color:#e6db74">&#34;Hello, World! Nice to meet you.&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create agent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewGreetingAgent</span>(<span style="color:#e6db74">&#34;greeter&#34;</span>, <span style="color:#a6e22e">mockLLM</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create test event</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;greeting&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;World&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Execute agent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Verify results</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>], <span style="color:#e6db74">&#34;Hello&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>], <span style="color:#e6db74">&#34;World&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Mock LLM Provider for testing</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MockLLMProvider</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">response</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span>      <span style="color:#66d9ef">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockLLMProvider</span>) <span style="color:#a6e22e">Generate</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">prompt</span> <span style="color:#66d9ef">string</span>) (<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">response</span>, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockLLMProvider</span>) <span style="color:#a6e22e">Name</span>() <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;mock&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="2-multi-agent-integration-test">2. Multi-Agent Integration Test</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestMultiAgentWorkflow</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create mock providers</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">response</span>: <span style="color:#e6db74">&#34;Processed successfully&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create agents</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agents</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;analyzer&#34;</span>: <span style="color:#a6e22e">NewAnalyzerAgent</span>(<span style="color:#a6e22e">mockLLM</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;processor&#34;</span>: <span style="color:#a6e22e">NewProcessorAgent</span>(<span style="color:#a6e22e">mockLLM</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create sequential runner</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runner</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">CreateSequentialRunner</span>(<span style="color:#a6e22e">agents</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;analyzer&#34;</span>, <span style="color:#e6db74">&#34;processor&#34;</span>}, <span style="color:#ae81ff">30</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test workflow</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;analyze&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;data&#34;</span>: <span style="color:#e6db74">&#34;test data&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runner</span>.<span style="color:#a6e22e">ProcessEvent</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Len</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>, <span style="color:#e6db74">&#34;analyzer&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>, <span style="color:#e6db74">&#34;processor&#34;</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="unit-testing-patterns">Unit Testing Patterns</h2>
<h3 id="testing-agent-logic">Testing Agent Logic</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestDataProcessingAgent</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tests</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span>     <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">input</span>    <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">expected</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">wantErr</span>  <span style="color:#66d9ef">bool</span>
</span></span><span style="display:flex;"><span>    }{
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;valid data processing&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">input</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;numbers&#34;</span>: []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>},
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">expected</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;sum&#34;</span>:     <span style="color:#ae81ff">15</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;average&#34;</span>: <span style="color:#ae81ff">3.0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;count&#34;</span>:   <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">wantErr</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;empty data&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">input</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;numbers&#34;</span>: []<span style="color:#66d9ef">int</span>{},
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">expected</span>: <span style="color:#66d9ef">nil</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">wantErr</span>:  <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;invalid input type&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">input</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;numbers&#34;</span>: <span style="color:#e6db74">&#34;not a slice&#34;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">expected</span>: <span style="color:#66d9ef">nil</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">wantErr</span>:  <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">tt</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">tests</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">tt</span>.<span style="color:#a6e22e">name</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewDataProcessingAgent</span>()
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;process&#34;</span>, <span style="color:#a6e22e">tt</span>.<span style="color:#a6e22e">input</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">tt</span>.<span style="color:#a6e22e">wantErr</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">expectedValue</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">tt</span>.<span style="color:#a6e22e">expected</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">expectedValue</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#a6e22e">key</span>])
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="testing-state-management">Testing State Management</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentStateHandling</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewStatefulAgent</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test state initialization</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initialState</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">initialState</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;counter&#34;</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;increment&#34;</span>, <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// First execution</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result1</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">initialState</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">result1</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;counter&#34;</span>])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Second execution with updated state</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result2</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">result1</span>.<span style="color:#a6e22e">State</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">result2</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;counter&#34;</span>])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Verify state persistence</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">result2</span>.<span style="color:#a6e22e">State</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;counter&#34;</span>))
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="testing-error-handling">Testing Error Handling</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentErrorHandling</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test with failing LLM provider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">failingLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">err</span>: <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;LLM service unavailable&#34;</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewResilientAgent</span>(<span style="color:#a6e22e">failingLLM</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;process&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;input&#34;</span>: <span style="color:#e6db74">&#34;test&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Agent should handle LLM failure gracefully</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>], <span style="color:#e6db74">&#34;service temporarily unavailable&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">True</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;fallback_used&#34;</span>].(<span style="color:#66d9ef">bool</span>))
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="integration-testing">Integration Testing</h2>
<h3 id="testing-orchestration-patterns">Testing Orchestration Patterns</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestSequentialOrchestration</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create agents that depend on each other</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agents</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;step1&#34;</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandlerFunc</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">event</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span>, <span style="color:#a6e22e">state</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">State</span>) (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">input</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;input&#34;</span>].(<span style="color:#66d9ef">string</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;step1_output&#34;</span>: <span style="color:#a6e22e">input</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;_processed&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            }, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>        }),
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;step2&#34;</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandlerFunc</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">event</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span>, <span style="color:#a6e22e">state</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">State</span>) (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">step1Output</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;step1_output&#34;</span>].(<span style="color:#66d9ef">string</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;final_output&#34;</span>: <span style="color:#a6e22e">step1Output</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;_finalized&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            }, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>        }),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runner</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">CreateSequentialRunner</span>(<span style="color:#a6e22e">agents</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;step1&#34;</span>, <span style="color:#e6db74">&#34;step2&#34;</span>}, <span style="color:#ae81ff">30</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;process&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;input&#34;</span>: <span style="color:#e6db74">&#34;test&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runner</span>.<span style="color:#a6e22e">ProcessEvent</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#e6db74">&#34;test_processed_finalized&#34;</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;step2&#34;</span>].<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;final_output&#34;</span>])
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestCollaborativeOrchestration</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create agents that work in parallel</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agents</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;analyzer&#34;</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandlerFunc</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">event</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span>, <span style="color:#a6e22e">state</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">State</span>) (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;analysis&#34;</span>: <span style="color:#e6db74">&#34;positive sentiment&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            }, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>        }),
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;summarizer&#34;</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandlerFunc</span>(<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">event</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span>, <span style="color:#a6e22e">state</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">State</span>) (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Data</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;summary&#34;</span>: <span style="color:#e6db74">&#34;brief summary&#34;</span>,
</span></span><span style="display:flex;"><span>                },
</span></span><span style="display:flex;"><span>            }, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>        }),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runner</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">CreateCollaborativeRunner</span>(<span style="color:#a6e22e">agents</span>, <span style="color:#ae81ff">30</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;analyze&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;text&#34;</span>: <span style="color:#e6db74">&#34;This is great!&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runner</span>.<span style="color:#a6e22e">ProcessEvent</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Len</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#e6db74">&#34;positive sentiment&#34;</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;analyzer&#34;</span>].<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;analysis&#34;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#e6db74">&#34;brief summary&#34;</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;summarizer&#34;</span>].<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;summary&#34;</span>])
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="testing-memory-integration">Testing Memory Integration</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentWithMemory</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create in-memory provider for testing</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memoryConfig</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentMemoryConfig</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Provider</span>:   <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Connection</span>: <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Dimensions</span>: <span style="color:#ae81ff">384</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Embedding</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">EmbeddingConfig</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Provider</span>: <span style="color:#e6db74">&#34;dummy&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memory</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewMemory</span>(<span style="color:#a6e22e">memoryConfig</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create memory-enabled agent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewMemoryEnabledAgent</span>(<span style="color:#a6e22e">memory</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">SetSession</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#e6db74">&#34;test-session&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// First interaction - store information</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;remember&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;info&#34;</span>: <span style="color:#e6db74">&#34;User likes coffee&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result1</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">event1</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result1</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>], <span style="color:#e6db74">&#34;remembered&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Second interaction - recall information</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;recall&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;query&#34;</span>: <span style="color:#e6db74">&#34;What does the user like?&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result2</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">event2</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result2</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>], <span style="color:#e6db74">&#34;coffee&#34;</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="testing-mcp-tool-integration">Testing MCP Tool Integration</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentWithMCPTools</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create mock MCP manager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockMCP</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockMCPManager</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">tools</span>: []<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">ToolSchema</span>{
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Name</span>:        <span style="color:#e6db74">&#34;search&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Description</span>: <span style="color:#e6db74">&#34;Search for information&#34;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">responses</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;search&#34;</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;results&#34;</span>: []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;Mock search result&#34;</span>},
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">response</span>: <span style="color:#e6db74">`I&#39;ll search for that information.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;tool_call&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{&#34;name&#34;: &#34;search&#34;, &#34;args&#34;: {&#34;query&#34;: &#34;test query&#34;}}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;/tool_call&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Based on the search results, here&#39;s what I found...`</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewToolEnabledAgent</span>(<span style="color:#a6e22e">mockLLM</span>, <span style="color:#a6e22e">mockMCP</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;query&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;question&#34;</span>: <span style="color:#e6db74">&#34;Search for test information&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">True</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;tools_used&#34;</span>].(<span style="color:#66d9ef">bool</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;tool_results&#34;</span>], <span style="color:#e6db74">&#34;Mock search result&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MockMCPManager</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools</span>     []<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">ToolSchema</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">responses</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockMCPManager</span>) <span style="color:#a6e22e">ListTools</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) ([]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">ToolSchema</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">tools</span>, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockMCPManager</span>) <span style="color:#a6e22e">CallTool</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">args</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}) (<span style="color:#66d9ef">interface</span>{}, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">response</span>, <span style="color:#a6e22e">exists</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">responses</span>[<span style="color:#a6e22e">name</span>]; <span style="color:#a6e22e">exists</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>, <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;tool not found: %s&#34;</span>, <span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="performance-testing">Performance Testing</h2>
<h3 id="load-testing">Load Testing</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentPerformance</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">Short</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Skip</span>(<span style="color:#e6db74">&#34;Skipping performance test in short mode&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewPerformantAgent</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test concurrent execution</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">concurrency</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">iterations</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>, <span style="color:#a6e22e">concurrency</span><span style="color:#f92672">*</span><span style="color:#a6e22e">iterations</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">concurrency</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">j</span> &lt; <span style="color:#a6e22e">iterations</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;process&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;data&#34;</span>: <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;test_%d_%d&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">j</span>),
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">duration</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Since</span>(<span style="color:#a6e22e">start</span>)
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">results</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">duration</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
</span></span><span style="display:flex;"><span>    close(<span style="color:#a6e22e">results</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Analyze performance</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">total</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">max</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">count</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">duration</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">results</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">total</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">duration</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">duration</span> &gt; <span style="color:#a6e22e">max</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">max</span> = <span style="color:#a6e22e">duration</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">count</span><span style="color:#f92672">++</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">average</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">total</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>(<span style="color:#a6e22e">count</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;Performance Results:&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Total requests: %d&#34;</span>, <span style="color:#a6e22e">count</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Average duration: %v&#34;</span>, <span style="color:#a6e22e">average</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Max duration: %v&#34;</span>, <span style="color:#a6e22e">max</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Requests per second: %.2f&#34;</span>, float64(<span style="color:#a6e22e">count</span>)<span style="color:#f92672">/</span><span style="color:#a6e22e">total</span>.<span style="color:#a6e22e">Seconds</span>())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Assert performance requirements</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Less</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">average</span>, <span style="color:#ae81ff">100</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>, <span style="color:#e6db74">&#34;Average response time should be under 100ms&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Less</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">max</span>, <span style="color:#ae81ff">500</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>, <span style="color:#e6db74">&#34;Max response time should be under 500ms&#34;</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="memory-usage-testing">Memory Usage Testing</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentMemoryUsage</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewMemoryEfficientAgent</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Measure initial memory</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m1</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">MemStats</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GC</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">ReadMemStats</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Run many iterations</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">1000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;process&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data&#34;</span>: <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Repeat</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#ae81ff">1000</span>), <span style="color:#75715e">// 1KB of data</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Force garbage collection and measure final memory</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GC</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m2</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">MemStats</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">ReadMemStats</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">m2</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Calculate memory increase</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memoryIncrease</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m2</span>.<span style="color:#a6e22e">Alloc</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">Alloc</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;Memory usage:&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Initial: %d KB&#34;</span>, <span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">Alloc</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Final: %d KB&#34;</span>, <span style="color:#a6e22e">m2</span>.<span style="color:#a6e22e">Alloc</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Logf</span>(<span style="color:#e6db74">&#34;  Increase: %d KB&#34;</span>, <span style="color:#a6e22e">memoryIncrease</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Assert reasonable memory usage (adjust threshold as needed)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Less</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">memoryIncrease</span>, uint64(<span style="color:#ae81ff">10</span><span style="color:#f92672">*</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">*</span><span style="color:#ae81ff">1024</span>), <span style="color:#e6db74">&#34;Memory increase should be less than 10MB&#34;</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="end-to-end-testing">End-to-End Testing</h2>
<h3 id="complete-workflow-testing">Complete Workflow Testing</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestCompleteWorkflow</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Set up complete system</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memoryConfig</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentMemoryConfig</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Provider</span>:   <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Connection</span>: <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Dimensions</span>: <span style="color:#ae81ff">384</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Embedding</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">EmbeddingConfig</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Provider</span>: <span style="color:#e6db74">&#34;dummy&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memory</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewMemory</span>(<span style="color:#a6e22e">memoryConfig</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">response</span>: <span style="color:#e6db74">&#34;I understand your request and will process it accordingly.&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create complete agent system</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agents</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;intake&#34;</span>:    <span style="color:#a6e22e">NewIntakeAgent</span>(<span style="color:#a6e22e">mockLLM</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;processor&#34;</span>: <span style="color:#a6e22e">NewProcessorAgent</span>(<span style="color:#a6e22e">mockLLM</span>, <span style="color:#a6e22e">memory</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;responder&#34;</span>: <span style="color:#a6e22e">NewResponderAgent</span>(<span style="color:#a6e22e">mockLLM</span>),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">runner</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">CreateSequentialRunner</span>(<span style="color:#a6e22e">agents</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;intake&#34;</span>, <span style="color:#e6db74">&#34;processor&#34;</span>, <span style="color:#e6db74">&#34;responder&#34;</span>}, <span style="color:#ae81ff">60</span><span style="color:#f92672">*</span><span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Test complete user interaction</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">SetSession</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#e6db74">&#34;e2e-test-session&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;user_request&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;I need help with my project&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;user_id&#34;</span>: <span style="color:#e6db74">&#34;test_user&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runner</span>.<span style="color:#a6e22e">ProcessEvent</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">event</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Len</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Verify each stage completed successfully</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;intake&#34;</span>].<span style="color:#a6e22e">Data</span>, <span style="color:#e6db74">&#34;processed&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;processor&#34;</span>].<span style="color:#a6e22e">Data</span>, <span style="color:#e6db74">&#34;analyzed&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Contains</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;responder&#34;</span>].<span style="color:#a6e22e">Data</span>, <span style="color:#e6db74">&#34;response&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Verify final response quality</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">finalResponse</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">results</span>[<span style="color:#e6db74">&#34;responder&#34;</span>].<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>].(<span style="color:#66d9ef">string</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">NotEmpty</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">finalResponse</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Greater</span>(<span style="color:#a6e22e">t</span>, len(<span style="color:#a6e22e">finalResponse</span>), <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="test-utilities-and-helpers">Test Utilities and Helpers</h2>
<h3 id="test-data-builders">Test Data Builders</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Event builder for consistent test data</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">EventBuilder</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">eventType</span> <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span>      <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">metadata</span>  <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewEventBuilder</span>(<span style="color:#a6e22e">eventType</span> <span style="color:#66d9ef">string</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">EventBuilder</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">eventType</span>: <span style="color:#a6e22e">eventType</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">data</span>:      make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">metadata</span>:  make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">eb</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span>) <span style="color:#a6e22e">WithData</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">interface</span>{}) <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">eb</span>.<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">eb</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">eb</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span>) <span style="color:#a6e22e">WithMetadata</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">interface</span>{}) <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">eb</span>.<span style="color:#a6e22e">metadata</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">eb</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">eb</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">EventBuilder</span>) <span style="color:#a6e22e">Build</span>() <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#a6e22e">eb</span>.<span style="color:#a6e22e">eventType</span>, <span style="color:#a6e22e">eb</span>.<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">eb</span>.<span style="color:#a6e22e">metadata</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">Metadata</span>[<span style="color:#a6e22e">k</span>] = <span style="color:#a6e22e">v</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">event</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage in tests</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestWithEventBuilder</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewEventBuilder</span>(<span style="color:#e6db74">&#34;process&#34;</span>).
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">WithData</span>(<span style="color:#e6db74">&#34;input&#34;</span>, <span style="color:#e6db74">&#34;test data&#34;</span>).
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">WithData</span>(<span style="color:#e6db74">&#34;priority&#34;</span>, <span style="color:#e6db74">&#34;high&#34;</span>).
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">WithMetadata</span>(<span style="color:#e6db74">&#34;user_id&#34;</span>, <span style="color:#e6db74">&#34;123&#34;</span>).
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Build</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use event in test...</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="agent-test-harness">Agent Test Harness</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">AgentTestHarness</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">agent</span>   <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockLLMProvider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memory</span>  <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Memory</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span>     <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewAgentTestHarness</span>(<span style="color:#a6e22e">agent</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentHandler</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">AgentTestHarness</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockLLM</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockLLMProvider</span>{}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memoryConfig</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentMemoryConfig</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Provider</span>:   <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Connection</span>: <span style="color:#e6db74">&#34;memory&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Dimensions</span>: <span style="color:#ae81ff">384</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Embedding</span>: <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">EmbeddingConfig</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Provider</span>: <span style="color:#e6db74">&#34;dummy&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">memory</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewMemory</span>(<span style="color:#a6e22e">memoryConfig</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ctx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">SetSession</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#e6db74">&#34;test-session&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">AgentTestHarness</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">agent</span>:   <span style="color:#a6e22e">agent</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mockLLM</span>: <span style="color:#a6e22e">mockLLM</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">memory</span>:  <span style="color:#a6e22e">memory</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ctx</span>:     <span style="color:#a6e22e">ctx</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AgentTestHarness</span>) <span style="color:#a6e22e">SetLLMResponse</span>(<span style="color:#a6e22e">response</span> <span style="color:#66d9ef">string</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">mockLLM</span>.<span style="color:#a6e22e">response</span> = <span style="color:#a6e22e">response</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AgentTestHarness</span>) <span style="color:#a6e22e">SetLLMError</span>(<span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">mockLLM</span>.<span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">err</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AgentTestHarness</span>) <span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">event</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">Event</span>) (<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">AgentResult</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">agent</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewState</span>())
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AgentTestHarness</span>) <span style="color:#a6e22e">Cleanup</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">memory</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">memory</span>.<span style="color:#a6e22e">Close</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage in tests</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestWithHarness</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">harness</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewAgentTestHarness</span>(<span style="color:#a6e22e">NewMyAgent</span>())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">harness</span>.<span style="color:#a6e22e">Cleanup</span>()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">harness</span>.<span style="color:#a6e22e">SetLLMResponse</span>(<span style="color:#e6db74">&#34;Expected response&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">event</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">NewEvent</span>(<span style="color:#e6db74">&#34;test&#34;</span>, <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;input&#34;</span>: <span style="color:#e6db74">&#34;test data&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">harness</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">event</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">Equal</span>(<span style="color:#a6e22e">t</span>, <span style="color:#e6db74">&#34;Expected response&#34;</span>, <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">Data</span>[<span style="color:#e6db74">&#34;response&#34;</span>])
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="continuous-integration">Continuous Integration</h2>
<h3 id="github-actions-test-configuration">GitHub Actions Test Configuration</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># .github/workflows/test.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>: [ <span style="color:#ae81ff">main, develop ]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">pull_request</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>: [ <span style="color:#ae81ff">main ]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">test</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">postgres</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">pgvector/pgvector:pg15</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">POSTGRES_PASSWORD</span>: <span style="color:#ae81ff">password</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">POSTGRES_DB</span>: <span style="color:#ae81ff">agentflow_test</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">options</span>: &gt;-<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          --health-cmd pg_isready
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          --health-interval 10s
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          --health-timeout 5s
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          --health-retries 5</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#ae81ff">5432</span>:<span style="color:#ae81ff">5432</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v3</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Set up Go</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/setup-go@v3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">go-version</span>: <span style="color:#ae81ff">1.21</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install dependencies</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">go mod download</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Run unit tests</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">go test -v -short ./...</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Run integration tests</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">go test -v ./...</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">TEST_DB_URL</span>: <span style="color:#ae81ff">postgres://postgres:password@localhost:5432/agentflow_test?sslmode=disable</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Run performance tests</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">go test -v -run TestPerformance ./...</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Generate coverage report</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: <span style="color:#ae81ff">go test -coverprofile=coverage.out ./...</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Upload coverage to Codecov</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">codecov/codecov-action@v3</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">file</span>: <span style="color:#ae81ff">./coverage.out</span></span></span></code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="test-organization">Test Organization</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Organize tests by functionality</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentCore</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;BasicExecution&#34;</span>, <span style="color:#a6e22e">testBasicExecution</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;ErrorHandling&#34;</span>, <span style="color:#a6e22e">testErrorHandling</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;StateManagement&#34;</span>, <span style="color:#a6e22e">testStateManagement</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentIntegration</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;WithMemory&#34;</span>, <span style="color:#a6e22e">testWithMemory</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;WithTools&#34;</span>, <span style="color:#a6e22e">testWithTools</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;WithOrchestration&#34;</span>, <span style="color:#a6e22e">testWithOrchestration</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestAgentPerformance</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">Short</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Skip</span>(<span style="color:#e6db74">&#34;Skipping performance tests in short mode&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;LoadTest&#34;</span>, <span style="color:#a6e22e">testLoadTest</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;MemoryUsage&#34;</span>, <span style="color:#a6e22e">testMemoryUsage</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#e6db74">&#34;Concurrency&#34;</span>, <span style="color:#a6e22e">testConcurrency</span>)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="test-data-management">Test Data Management</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Use table-driven tests for multiple scenarios</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestDataProcessing</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">testCases</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">name</span>     <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">input</span>    <span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">expected</span> <span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">wantErr</span>  <span style="color:#66d9ef">bool</span>
</span></span><span style="display:flex;"><span>    }{
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Test cases here...</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">tc</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">testCases</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Run</span>(<span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">name</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Test implementation...</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Use test fixtures for complex data</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">loadTestFixture</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{} {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">filepath</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#e6db74">&#34;testdata&#34;</span>, <span style="color:#a6e22e">filename</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">result</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">data</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">result</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">require</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><strong><a href="/AgenticGoKitDocs/guides/development/debugging/index.html">Debugging</a></strong> - Debug agent interactions effectively</li>
<li><strong><a href="/AgenticGoKitDocs/guides/development/best-practices/index.html">Best Practices</a></strong> - Development best practices</li>
<li><strong><a href="/AgenticGoKitDocs/guides/deployment/readme/index.html">Production Deployment</a></strong> - Production deployment</li>
</ul>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Jul 25, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/AgenticGoKitDocs/index.html">
            <div class="logo-title">AgenticGoKit Docs</div>
          </a>
        </div>
        <search><form action="/AgenticGoKitDocs/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/index.html"><a class="padding" href="/AgenticGoKitDocs/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/readme/index.html">content</a></li>
            <li class="parent alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/index.html"><input type="checkbox" id="R-section-8fc2fd7736125e87cab8840a86c2af5a" aria-controls="R-subsections-8fc2fd7736125e87cab8840a86c2af5a" checked><label for="R-section-8fc2fd7736125e87cab8840a86c2af5a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu guides</span></label><a class="padding" href="/AgenticGoKitDocs/guides/index.html">guides</a><ul id="R-subsections-8fc2fd7736125e87cab8840a86c2af5a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/readme/index.html">guides</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/agentbasics/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/agentbasics/index.html">AgentBasics</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/examples/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/examples/index.html">Examples</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/configuration/index.html">Configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/customtools/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/customtools/index.html">CustomTools</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/providers/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/providers/index.html">Providers</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memoryprovidersetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memoryprovidersetup/index.html">MemoryProviderSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memorytroubleshooting/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memorytroubleshooting/index.html">MemoryTroubleshooting</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/embeddingmodelguide/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/embeddingmodelguide/index.html">EmbeddingModelGuide</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/ragconfiguration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/ragconfiguration/index.html">RAGConfiguration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/toolintegration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/toolintegration/index.html">ToolIntegration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/pgvectorsetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/pgvectorsetup/index.html">PgVectorSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/weaviatesetup/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/weaviatesetup/index.html">WeaviateSetup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/performance/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/performance/index.html">Performance</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/errorhandling/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/errorhandling/index.html">ErrorHandling</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/deployment/index.html"><input type="checkbox" id="R-section-ecc839349395ef3c015a12132049dff2" aria-controls="R-subsections-ecc839349395ef3c015a12132049dff2" checked><label for="R-section-ecc839349395ef3c015a12132049dff2"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu deployment</span></label><a class="padding" href="/AgenticGoKitDocs/guides/deployment/index.html">deployment</a><ul id="R-subsections-ecc839349395ef3c015a12132049dff2" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/deployment/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/deployment/readme/index.html">deployment</a></li></ul></li>
            <li class="parent alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/development/index.html"><input type="checkbox" id="R-section-fff1f5eca5d0a93209b9c6262762c25a" aria-controls="R-subsections-fff1f5eca5d0a93209b9c6262762c25a" checked><label for="R-section-fff1f5eca5d0a93209b9c6262762c25a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu development</span></label><a class="padding" href="/AgenticGoKitDocs/guides/development/index.html">development</a><ul id="R-subsections-fff1f5eca5d0a93209b9c6262762c25a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/readme/index.html">development</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/best-practices/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/best-practices/index.html">best-practices</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/debugging/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/debugging/index.html">debugging</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/research-assistant/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/research-assistant/index.html">research-assistant</a></li>
            <li class="active " data-nav-id="/AgenticGoKitDocs/guides/development/testing-agents/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/testing-agents/index.html">testing-agents</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/visualization/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/visualization/index.html">visualization</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/development/web-search-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/development/web-search-integration/index.html">web-search-integration</a></li></ul></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/framework-comparison/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/framework-comparison/index.html">framework-comparison</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/memory/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/memory/index.html">Memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/scaffoldmemoryguide/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/scaffoldmemoryguide/index.html">ScaffoldMemoryGuide</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/guides/setup/index.html"><input type="checkbox" id="R-section-0124aed9abb5064d53391168f3c95c22" aria-controls="R-subsections-0124aed9abb5064d53391168f3c95c22" checked><label for="R-section-0124aed9abb5064d53391168f3c95c22"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu setup</span></label><a class="padding" href="/AgenticGoKitDocs/guides/setup/index.html">setup</a><ul id="R-subsections-0124aed9abb5064d53391168f3c95c22" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/readme/index.html">setup</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/llm-providers/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/llm-providers/index.html">llm-providers</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/mcp-tools/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/mcp-tools/index.html">mcp-tools</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/orchestration-configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/orchestration-configuration/index.html">orchestration-configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/setup/vector-databases/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/setup/vector-databases/index.html">vector-databases</a></li></ul></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/guides/troubleshooting/index.html"><a class="padding" href="/AgenticGoKitDocs/guides/troubleshooting/index.html">troubleshooting</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/contributors/index.html"><input type="checkbox" id="R-section-190d9b328fbda7e13ab386f7a5417de5" aria-controls="R-subsections-190d9b328fbda7e13ab386f7a5417de5" checked><label for="R-section-190d9b328fbda7e13ab386f7a5417de5"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu contributors</span></label><a class="padding" href="/AgenticGoKitDocs/contributors/index.html">contributors</a><ul id="R-subsections-190d9b328fbda7e13ab386f7a5417de5" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/readme/index.html">contributors</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/contributorguide/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/contributorguide/index.html">ContributorGuide</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/codestyle/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/codestyle/index.html">CodeStyle</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/corevsinternal/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/corevsinternal/index.html">CoreVsInternal</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/addingfeatures/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/addingfeatures/index.html">AddingFeatures</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/testing/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/testing/index.html">Testing</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/contributors/docsstandards/index.html"><a class="padding" href="/AgenticGoKitDocs/contributors/docsstandards/index.html">DocsStandards</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/reference/index.html"><input type="checkbox" id="R-section-66002f201bef818664bb81aa67490c58" aria-controls="R-subsections-66002f201bef818664bb81aa67490c58" checked><label for="R-section-66002f201bef818664bb81aa67490c58"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu reference</span></label><a class="padding" href="/AgenticGoKitDocs/reference/index.html">reference</a><ul id="R-subsections-66002f201bef818664bb81aa67490c58" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/readme/index.html">reference</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/configuration/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/configuration/index.html">configuration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/cli/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/cli/index.html">cli</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/mcp/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/mcp/index.html">mcp</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/agent/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/agent/index.html">agent</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/memory/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/memory/index.html">memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/orchestration/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/orchestration/index.html">orchestration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/reference/api/state-event/index.html"><a class="padding" href="/AgenticGoKitDocs/reference/api/state-event/index.html">state-event</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/index.html"><input type="checkbox" id="R-section-e1e8c1e70c5500b49e8dda2dc550651a" aria-controls="R-subsections-e1e8c1e70c5500b49e8dda2dc550651a" checked><label for="R-section-e1e8c1e70c5500b49e8dda2dc550651a"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu tutorials</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/index.html">tutorials</a><ul id="R-subsections-e1e8c1e70c5500b49e8dda2dc550651a" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/readme/index.html">tutorials</a></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/advanced/index.html"><input type="checkbox" id="R-section-d3def5cd76adc8096d0ff9fda6b8e479" aria-controls="R-subsections-d3def5cd76adc8096d0ff9fda6b8e479" checked><label for="R-section-d3def5cd76adc8096d0ff9fda6b8e479"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu advanced</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/index.html">advanced</a><ul id="R-subsections-d3def5cd76adc8096d0ff9fda6b8e479" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/readme/index.html">advanced</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/circuit-breaker-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/circuit-breaker-patterns/index.html">circuit-breaker-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/load-balancing-scaling/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/load-balancing-scaling/index.html">load-balancing-scaling</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/retry-policies/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/retry-policies/index.html">retry-policies</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/advanced/testing-strategies/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/advanced/testing-strategies/index.html">testing-strategies</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/index.html"><input type="checkbox" id="R-section-212c6ccffb40ecdd78eb2136f98c4cac" aria-controls="R-subsections-212c6ccffb40ecdd78eb2136f98c4cac" checked><label for="R-section-212c6ccffb40ecdd78eb2136f98c4cac"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu core-concepts</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/index.html">core-concepts</a><ul id="R-subsections-212c6ccffb40ecdd78eb2136f98c4cac" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/readme/index.html">core-concepts</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/agent-lifecycle/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/agent-lifecycle/index.html">agent-lifecycle</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/error-handling/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/error-handling/index.html">error-handling</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/message-passing/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/message-passing/index.html">message-passing</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/orchestration-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/orchestration-patterns/index.html">orchestration-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/core-concepts/state-management/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/core-concepts/state-management/index.html">state-management</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/debugging/index.html"><input type="checkbox" id="R-section-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" aria-controls="R-subsections-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" checked><label for="R-section-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu debugging</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/index.html">debugging</a><ul id="R-subsections-d8dfe6eec6c6d4cb6f6f50bdd07fa3cc" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/readme/index.html">debugging</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/debugging-multi-agent-systems/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/debugging-multi-agent-systems/index.html">debugging-multi-agent-systems</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/debugging/logging-and-tracing/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/debugging/logging-and-tracing/index.html">logging-and-tracing</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/index.html"><input type="checkbox" id="R-section-e7f904c8b9d0f9bf1f07ca7d482d2247" aria-controls="R-subsections-e7f904c8b9d0f9bf1f07ca7d482d2247" checked><label for="R-section-e7f904c8b9d0f9bf1f07ca7d482d2247"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu getting-started</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/index.html">getting-started</a><ul id="R-subsections-e7f904c8b9d0f9bf1f07ca7d482d2247" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/readme/index.html">getting-started</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/memory-and-rag/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/memory-and-rag/index.html">memory-and-rag</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/multi-agent-collaboration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/multi-agent-collaboration/index.html">multi-agent-collaboration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/production-deployment/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/production-deployment/index.html">production-deployment</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/quickstart/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/quickstart/index.html">quickstart</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/tool-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/tool-integration/index.html">tool-integration</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/getting-started/your-first-agent/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/getting-started/your-first-agent/index.html">your-first-agent</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/mcp/index.html"><input type="checkbox" id="R-section-153aac44598009a99dd5a60317a3eecc" aria-controls="R-subsections-153aac44598009a99dd5a60317a3eecc" checked><label for="R-section-153aac44598009a99dd5a60317a3eecc"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu mcp</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/index.html">mcp</a><ul id="R-subsections-153aac44598009a99dd5a60317a3eecc" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/readme/index.html">mcp</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/advanced-tool-patterns/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/advanced-tool-patterns/index.html">advanced-tool-patterns</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/tool-development/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/tool-development/index.html">tool-development</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/mcp/tool-integration/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/mcp/tool-integration/index.html">tool-integration</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/index.html"><input type="checkbox" id="R-section-9c1a65f2d7b3888241dcafa51a0710e7" aria-controls="R-subsections-9c1a65f2d7b3888241dcafa51a0710e7" checked><label for="R-section-9c1a65f2d7b3888241dcafa51a0710e7"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu memory-systems</span></label><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/index.html">memory-systems</a><ul id="R-subsections-9c1a65f2d7b3888241dcafa51a0710e7" class="collapsible-menu">
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/readme/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/readme/index.html">memory-systems</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/basic-memory/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/basic-memory/index.html">basic-memory</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/document-ingestion/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/document-ingestion/index.html">document-ingestion</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/knowledge-bases/index.html">knowledge-bases</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/memory-optimization/index.html">memory-optimization</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/rag-implementation/index.html">rag-implementation</a></li>
            <li class="" data-nav-id="/AgenticGoKitDocs/tutorials/memory-systems/vector-databases/index.html"><a class="padding" href="/AgenticGoKitDocs/tutorials/memory-systems/vector-databases/index.html">vector-databases</a></li></ul></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/AgenticGoKitDocs/js/clipboard/clipboard.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/perfect-scrollbar/perfect-scrollbar.min.js?1753430931" defer></script>
    <script src="/AgenticGoKitDocs/js/theme.js?1753430931" defer></script>
  </body>
</html>
